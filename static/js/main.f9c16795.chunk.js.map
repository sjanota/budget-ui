{"version":3,"sources":["react-auth0-spa.js","apollo.js","lang/pl.js","model/Amount.js","util/immutable.js","components/gql/envelopes.js","components/gql/monthlyReport.js","components/gql/expenses.js","components/gql/plans.js","components/gql/transfers.js","components/gql/budget.js","components/gql/accounts.js","components/sbadmin2/components/Combobox/Combobox.tsx","components/sbadmin2/components/IconButton/IconButton.tsx","components/sbadmin2/components/OpenModalButton/OpenModalButton.tsx","components/sbadmin2/context.js","components/sbadmin2/language.js","util/capitalize.js","components/sbadmin2/components/Page/PageHeader.js","components/sbadmin2/components/Page/Page.js","components/sbadmin2/components/Panel/PanelTitle.js","components/sbadmin2/components/Panel/Panel.js","components/sbadmin2/components/SplitButton/SplitButton.tsx","components/sbadmin2/components/Panel/PanelHeader.js","components/sbadmin2/components/Panel/PanelBody.js","components/sbadmin2/components/Table/Table.tsx","components/sbadmin2/components/TablePanel/TablePanel.js","components/sbadmin2/NotFoundPage.js","components/sbadmin2/Sidebar/SidebarCollapsibleLink.js","components/sbadmin2/Sidebar/SidebarSimpleLink.js","components/sbadmin2/Sidebar/SidebarGroup.js","components/sbadmin2/Sidebar/Sidebar.js","components/sbadmin2/SBAdmin2.js","components/sbadmin2/utilities/FormControl.js","components/sbadmin2/bootstrap.js","components/common/CancelButton.js","components/common/SaveButton.js","components/sbadmin2/utilities/FormInModal.js","components/common/Details.jsx","components/common/RefreshButton.js","components/sbadmin2/utilities/Spinner.js","components/gql/WithQuery.js","components/gql/QueryTablePanel.js","components/common/EntityList.jsx","model/Day.js","model/Month.js","components/context/Month.jsx","components/sbadmin2/components/ContextSwitcher/ContextSwitcher.jsx","components/common/MonthSwitcher.js","components/layout/DetailsPage.jsx","components/layout/ListPage.jsx","components/workflow/ListWithDetailsWorkflow.jsx","components/common/CreateButton.js","components/sbadmin2/utilities/InlineFormControl.js","components/sbadmin2/utilities/useFormData.js","components/gql/categories.js","components/Expenses/AmountInput.js","components/Expenses/CategoriesInput.js","components/Expenses/ExpenseModal.js","components/Expenses/CreateExpenseButton.js","components/common/ListAction.jsx","components/common/ListActions.jsx","components/Expenses/ExpensesTablePanel.js","components/sbadmin2/components/CollapsiblePanel/CollapsiblePanel.js","components/Transfers/TransferModal.js","components/Transfers/CreateTransferButton.js","components/Transfers/TransfersTablePanel.js","components/Accounts/AccountDetails.jsx","components/Accounts/AccountModal.js","components/Accounts/CreateAccountButton.js","components/Accounts/UpdateAccountButton.js","components/Accounts/AccountsPage.js","components/workflow/DetailsWorkflow.jsx","components/Categories/CategoryModal.js","components/Categories/CreateCategoryButton.js","components/Categories/UpdateCategoryButton.js","components/Categories/CategoriesTablePanel.js","components/Categories/CategoryPage.jsx","model/Envelope.js","components/sbadmin2/utilities/OptionalFormControl.js","components/Plans/PlanModal.js","components/Plans/CreatePlanButton.js","components/Plans/DeletePlanButton.js","components/Plans/UpdatePlanButton.js","components/Plans/PlansTablePanel.js","model/propTypes.js","components/Envelopes/EnvelopeModal.js","components/Envelopes/CreateEnvelopeButton.js","components/Envelopes/UpdateEnvelopeButton.js","components/Envelopes/EnvelopesPage.js","components/Expenses/ExpensesPage.js","components/MonthDashboardPage/StartNextMonthButton.js","components/MonthDashboardPage/CurrentMonth.js","components/sbadmin2/Gauge.js","components/MonthDashboardPage/Gauges.js","components/MonthDashboardPage/MonthProblems.js","components/MonthDashboardPage/MonthDashboardPage.js","components/Plans/PlansPage.js","components/sbadmin2/Topbar/TopbarContext.js","components/sbadmin2/Topbar/Topbar.js","components/sbadmin2/Topbar/TopbarMenu.js","components/sbadmin2/Topbar/TopbarUser.js","components/sbadmin2/Topbar/TopbarContextSwitcher.js","components/TopbarBudgetSwitcher.js","components/Topbar.js","components/Transfers/TransfersPage.js","components/App/sidebarConfig.js","components/App/App.js","serviceWorker.js","index.js","components/Beta.js"],"names":["DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","Auth0Context","React","createContext","useAuth0","useContext","Auth0Provider","children","onRedirectCallback","returnTo","initOptions","useState","isAuthenticated","setIsAuthenticated","user","setUser","token","setToken","auth0Client","setAuth0","loading","setLoading","popupOpen","setPopupOpen","useEffect","a","async","createAuth0Client","auth0FromHook","search","includes","handleRedirectCallback","appState","getUser","getTokenSilently","initAuth0","Provider","value","loginWithPopup","params","console","error","getIdTokenClaims","loginWithRedirect","getTokenWithPopup","logout","p","getTokenScopes","claimsString","split","claims","JSON","parse","atob","scope","fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","createClient","graphqlApiUrl","process","httpLink","createHttpLink","uri","authLink","setContext","_","headers","authorization","cache","InMemoryCache","errorLink","onError","graphQLErrors","networkError","REACT_APP_ENV","map","message","locations","path","log","link","concat","ApolloClient","ApolloLink","from","connectToDevTools","AuthApolloProvider","client","buttons","create","cancel","save","sidebar","sections","currentMonth","budget","pages","dashboard","expenses","transfers","plans","accounts","envelopes","topbar","budgetLabel","alertsLabel","messagesLabel","planned","incomes","leftToPlan","noProblems","problems","overplanned","underplanned","expensesExceedPlans","envelope","envelopeOverLimit","negativeAccountBalance","account","monthNotEnded","closeMonth","table","columns","balance","name","expensesTableTitle","inTransfersTableTitle","outTransfersTableTitle","modal","createTitle","editTitle","labels","limit","overLimit","inPlansTableTitle","outPlansTableTitle","categories","description","fromEnvelope","toEnvelope","currentAmount","amount","recurring","fromAccount","toAccount","date","totalAmount","category","months","Amount","string","number","math","replace","Math","round","e","kSeparator","fixed","toFixed","parts","join","format","removeFromListByID","list","elementId","idx","findIndex","id","slice","length","GET_ENVELOPES","gql","CREATE_ENVELOPE","UPDATE_ENVELOPE","useGetEnvelopes","selectedBudget","useBudget","useQuery","variables","budgetID","MONTHLY_REPORT_FRAGMENT","GET_MONTHLY_REPORT","EXPENSE_FRAGMENT","GET_EXPENSES","CREATE_EXPENSE","UPDATE_EXPENSE","useUpdateExpense","useMutation","refetchQueries","query","GET_ACCOUNTS","month","mutation","rest","input","DELETE_EXPENSE","useDeleteExpense","update","deleteExpense","data","monthlyReport","readQuery","writeQuery","PLAN_FRAGMENT","GET_CURRENT_PLANS","CREATE_PLAN","UPDATE_PLAN","DELETE_PLAN","TRANSFER_FRAGMENT","GET_CURRENT_TRANSFERS","GET_TRANSFERS","CREATE_TRANSFER","UPDATE_TRANSFER","useUpdateTransfer","DELETE_TRANSFER","useDeleteTranfer","deleteTransfer","BudgetContext","GET_BUDGETS","storageKey","BudgetProvider","setSelectedBudget","sessionStorage","setItem","budgets","lastChosenID","getItem","lastChosen","find","b","CLOSE_CURRENT_MONTH","useGetAccounts","CREATE_ACCOUNT","UPDATE_ACCOUNT","Combobox","disabled","allowedValues","_ref","defaultID","defaultValue","className","required","ariaLabel","variant","prependLabel","valueByID","v","valueByLabel","useCallback","label","show","setShow","filter","setFilter","dropdownRef","useRef","filtered","toLowerCase","onInputChange","target","selected","current","handleClickOutside","event","contains","isClickedInside","addEventListener","removeEventListener","Dropdown","ref","onToggle","isOpen","classnames","Toggle","as","props","FormControl","type","onChange","aria-label","tabIndex","Menu","Item","eventKey","key","onClick","forwardRef","InputGroup","IconButton","icon","borderless","size","prefix","classes","preventDefault","OpenModalButton","Button","button","ModalContent","modalContent","onHide","stopPropagation","SBAdmin2Context","SBAdmin2Provider","sidebarToggled","setSidebarToggled","toggleSidebar","useSBAdmin2","DictionaryContext","DictionaryProvider","dictionaries","locale","useDictionary","withDictionary","prop","Component","readPropName","readDict","charAt","toUpperCase","newProps","dictionary","BreadcrumbItem","text","actions","breadcrumbs","Breadcrumb","listProps","Link","to","active","Page","Header","PageHeader","classNames","Panel","SplitButton","Title","PanelTitle","Body","addColumnNames","c","dataField","columnNames","bootstrap4","TablePanel","headerButtons","panelClassName","Wrapper","wrapper","wrapperProps","hiddenColumns","visibleColumns","filters","onSelect","mappers","selectRow","mode","clickToSelect","hideSelectColumn","undefined","isColumnHidden","isHidden","some","hc","isVisible","vc","wihtouHidden","headerClasses","hidden","filteredData","row","every","f","filtersMatch","mappedData","reduce","acc","mapper","striped","hover","bordered","defaultProps","NotFoundPage","data-text","SidebarCollapsibleLink","parent","faIcon","isActive","routes","oneOfRoutsMatchesLocation","useLocation","iconClasses","data-toggle","data-target","aria-expanded","aria-controls","data-parent","Fragment","SidebarSimpleLink","exact","SidebarGroup","group","entries","entry","Sidebar","renderBrandName","renderBrandIcon","config","toggled","SBAdmin2","sidebarProps","copyright","Topbar","component","inline","Form","Group","Row","Label","column","Input","formData","feedback","wrap","Col","sm","child","Control","default","Feedback","Variant","secondary","primary","danger","success","warning","white","Size","lg","CancelButton","faTrash","SaveButton","faSave","FormInModal","onSave","validated","setValidated","form","handleSave","isValid","checkValidity","changed","firstInput","getElementsByTagName","focus","onSubmit","closeButton","Footer","entity","fieldNames","DetailsField","formatter","RefreshButton","faSyncAlt","Spinner","role","ErrorMessageList","errorMessage","subErrors","ErrorMessage","result","errors","WithQuery","showError","QueryTablePanel","getData","refetch","EntityList","basePath","createButton","renderActions","useHistory","enhancedColumns","sort","isDummyColumn","style","whiteSpace","width","paddingBottom","push","encodeURIComponent","keyField","defaultSorted","order","Day","year","day","this","String","padStart","Date","getYear","getMonth","getDate","monthNames","Month","Number","MonthContext","useMonth","MonthProvider","selectedMonth","setSelectedMonth","ContextSwitcher","displayBg","labelBg","showLabel","labelClasses","Prepend","Text","append","ButtonGroup","GET_AVAILABLE_REPORTS","MonthSwitcher","availableReports","reverse","m","parsed","DetailsPage","getBreadcrumbPrefix","DetailsSection","readColumnNames","AdditionalDetails","detailsComponent","titleField","readFieldNames","ListPage","render","match","CreateButton","faPlus","InlineFormControl","createFormData","model","rerender","getRoot","Object","prototype","hasOwnProperty","call","$model","$init","_originalPush","removeAt","splice","arrayFormData","$process","$default","_default","init","simpleFormData","$includeAllValues","keys","k","compositeFormData","useFormData","setValue","GET_CATEGORIES","CREATE_CATEGORY","UPDATE_CATEGORY","useGetCategories","AmountInput","placeholder","setIsValid","newValue","CategoriesInput","categoryFormData","categoryID","faMinus","ExpenseModal","accountsQuery","accountID","first","firstDay","last","lastDay","accountsData","min","max","CreateExpenseButton","createExpense","useCreateExpense","ListAction","ListActions","monthScopedResource","dictionaryName","modalComponent","updateHook","deletehook","updateMutation","deleteMutation","EditInModal","Delete","Edit","faEdit","Modal","buttonProps","footer","amounts","prettyFormat","baseColumns","align","headerAlign","footerAlign","rowClasses","rowIndex","expandRow","renderer","ExpensesTablePanel","readTitle","accountFilter","categoryFilter","addFooter","useGetExpenses","d","CollapsibleContext","CollapsiblePanel","initialyShown","toggle","s","TransferModal","fromAccountID","toAccountID","CreateTransferButton","createTransfer","useCreateTransfer","faChevronUp","faChevronDown","Collapse","in","cell","TransfersTablePanel","toAccountFilter","fromAccountFilter","useGetTransfers","AccountDetails","AccountModal","CreateAccountButton","createAccount","useCreateAccount","UpdateAccountButton","useUpdateAccount","updateAccount","AccountsPage","faArchive","decodeURIComponent","CategoryModal","envelopeID","CreateCategoryButton","onClickRef","createCategory","useCreateCategory","UpdateCategoryButton","useUpdateCategory","updateEnvelope","CategoriesTablePanel","envelopeFilter","CategoryPage","readText","CategoryDetails","CategoryExpenses","Envelope","OptionalFormControl","initEnabled","enabled","setEnabled","toggleEnabled","Check","custom","checked","autoFocus","PlanModal","recurringAmount","fd","fromEnvelopeID","toEnvelopeID","CreatePlanButton","otherProps","createPlan","useCreatePlan","DeletePlanButton","plan","deletePlan","useDeletePlan","UpdatePlanButton","useUpdatePlan","updatePlan","PlansTablePanel","useGetCurrentPlans","sortValue","PropTypes","Account","shape","isRequired","totalBalance","EnvelopeModal","CreateEnvelopeButton","createEnvelope","useCreateEnvelope","UpdateEnvelopeButton","useUpdateEnvelope","EnvelopesPage","EnvelopeDetails","ExpensesPage","StartNextMonthButton","warn","useCloseCurrentMonth","closeCurrentMonth","faClipboardCheck","CurrentMonth","severity","Gauge","Gauges","totalPlannedAmount","totalIncomeAmount","totalExpenseAmount","severityVariant","ERROR","WARNING","INFO","severityIcon","basePathPerProblem","NegativeBalanceOnEnvelope","EnvelopeOverLimit","NegativeBalanceOnAccount","MonthProblems","envelopesQuery","envelopesData","problem","Problem","NoProblems","__typename","entityName","ProblemMessage","MonthDashboardPage","fetchPolicy","useGetMonthlyReport","PlansPage","TopbarContextExpanded","renderContext","TopbarContextMinimized","aria-haspopup","cursor","aria-labelledby","TopbarContext","minified","renderMenus","renderUser","faIconContextMinified","TopbarMenuCounter","counter","badge","TopbarMenu","TopbarUser","alt","src","picture","TopbarContextSwitcher","TopbarBudgetSwitcher","pictureUrl","TransfersPage","sidebarConfig","pl","Boolean","hostname","targetUrl","redirectURI","origin","AuthorizationProvider","REACT_APP_INSECURE_AUTH_DISABLED","domain","client_id","clientId","redirect_uri","audience","Promise","resolve","ReactDOM","setScope","then","basename","Consumer","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f9c16795.chunk.js","sourcesContent":["import createAuth0Client from '@auth0/auth0-spa-js';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useEffect, useState } from 'react';\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nexport const Auth0Context = React.createContext();\nexport const useAuth0 = () => useContext(Auth0Context);\nexport const Auth0Provider = ({\n  children,\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  returnTo,\n  ...initOptions\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState();\n  const [user, setUser] = useState();\n  const [token, setToken] = useState();\n  const [auth0Client, setAuth0] = useState();\n  const [loading, setLoading] = useState(true);\n  const [popupOpen, setPopupOpen] = useState(false);\n\n  useEffect(() => {\n    const initAuth0 = async () => {\n      const auth0FromHook = await createAuth0Client(initOptions);\n      setAuth0(auth0FromHook);\n\n      if (window.location.search.includes('code=')) {\n        const { appState } = await auth0FromHook.handleRedirectCallback();\n        onRedirectCallback(appState);\n      }\n\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\n\n      setIsAuthenticated(isAuthenticated);\n\n      if (isAuthenticated) {\n        const user = await auth0FromHook.getUser();\n        setUser(user);\n\n        const token = await auth0FromHook.getTokenSilently();\n        setToken(token);\n      }\n\n      setLoading(false);\n    };\n    initAuth0();\n    // eslint-disable-next-line\n  }, []);\n\n  const loginWithPopup = async (params = {}) => {\n    setPopupOpen(true);\n    try {\n      await auth0Client.loginWithPopup(params);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setPopupOpen(false);\n    }\n    const user = await auth0Client.getUser();\n    setUser(user);\n    setIsAuthenticated(true);\n  };\n\n  const handleRedirectCallback = async () => {\n    setLoading(true);\n    await auth0Client.handleRedirectCallback();\n    const user = await auth0Client.getUser();\n    setLoading(false);\n    setIsAuthenticated(true);\n    setUser(user);\n  };\n  return (\n    <Auth0Context.Provider\n      value={{\n        token,\n        isAuthenticated,\n        user,\n        loading,\n        popupOpen,\n        loginWithPopup,\n        handleRedirectCallback,\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\n        logout: (...p) => auth0Client.logout({ ...p, returnTo }),\n        getTokenScopes: async (...p) => {\n          const token = await auth0Client.getTokenSilently(...p);\n          const claimsString = token.split('.')[1];\n          const claims = JSON.parse(atob(claimsString));\n          const scope = claims.scope.split(' ');\n          return scope;\n        },\n      }}\n    >\n      {children}\n    </Auth0Context.Provider>\n  );\n};\n\nAuth0Provider.propTypes = {\n  children: PropTypes.node,\n  onRedirectCallback: PropTypes.func,\n  returnTo: PropTypes.string.isRequired,\n};\n","import { ApolloProvider } from '@apollo/react-hooks';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { IntrospectionFragmentMatcher } from 'apollo-cache-inmemory';\nimport ApolloClient from 'apollo-client';\nimport { ApolloLink } from 'apollo-link';\nimport { setContext } from 'apollo-link-context';\nimport { onError } from 'apollo-link-error';\nimport { createHttpLink } from 'apollo-link-http';\nimport { getMainDefinition } from 'apollo-utilities';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\n\nimport introspectionQueryResultData from './fragmentTypes.json';\nimport { useAuth0 } from './react-auth0-spa.js';\n\nconst fragmentMatcher = new IntrospectionFragmentMatcher({\n  introspectionQueryResultData,\n});\n\nexport function isSubscriptionOperation({ query }) {\n  const definition = getMainDefinition(query);\n  return (\n    definition.kind === 'OperationDefinition' &&\n    definition.operation === 'subscription'\n  );\n}\n\nexport function createClient(token) {\n  const graphqlApiUrl = process.env.REACT_APP_GQL_URL;\n  // const graphqlApiUrl = 'http://localhost:8080/query';\n  const httpLink = createHttpLink({ uri: graphqlApiUrl });\n  const authLink = setContext((_, { headers }) => {\n    // get the authentication token from local storage if it exists\n    // return the headers to the context so httpLink can read them\n    return {\n      headers: {\n        ...headers,\n        authorization: token ? `Bearer ${token}` : '',\n      },\n    };\n  });\n  const cache = new InMemoryCache({ fragmentMatcher });\n\n  const errorLink = onError(({ graphQLErrors, networkError }) => {\n    if (process.env.REACT_APP_ENV !== 'production') {\n      if (graphQLErrors) {\n        graphQLErrors.map(({ message, locations, path }) =>\n          console.log(\n            `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`\n          )\n        );\n      }\n\n      if (networkError) console.log(`[Network error]: ${networkError}`);\n    }\n  });\n\n  // const link = split(isSubscriptionOperation, wsLink, httpLink);\n  const link = authLink.concat(httpLink);\n\n  return new ApolloClient({\n    uri: graphqlApiUrl,\n    cache,\n    link: ApolloLink.from([errorLink, link]),\n    connectToDevTools: true,\n  });\n}\n\nexport function AuthApolloProvider({ children }) {\n  const { isAuthenticated, loading, loginWithRedirect, token } = useAuth0();\n\n  useEffect(() => {\n    if (loading) {\n      return;\n    }\n    if (!isAuthenticated) {\n      loginWithRedirect({});\n      return;\n    }\n  }, [isAuthenticated, loginWithRedirect, loading]);\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  if (!isAuthenticated || !token) {\n    return <div />;\n  }\n\n  return (\n    <ApolloProvider client={createClient(token)}>{children}</ApolloProvider>\n  );\n}\n\nAuthApolloProvider.propTypes = {\n  children: PropTypes.node,\n};\n","export default {\n  buttons: {\n    create: 'Dodaj',\n    cancel: 'Anuluj',\n    save: 'Zapisz',\n  },\n  sidebar: {\n    sections: {\n      currentMonth: 'Bieżący miesiąc',\n      budget: 'Budżet',\n    },\n    pages: {\n      dashboard: 'Podsumowanie',\n      expenses: 'Wydatki',\n      transfers: 'Przelewy',\n      plans: 'Plany',\n      accounts: 'Konta',\n      envelopes: 'Koperty',\n    },\n  },\n  topbar: {\n    budgetLabel: 'Budżet',\n    alertsLabel: 'Powiadomienia',\n    messagesLabel: 'Wiadomości',\n  },\n  dashboard: {\n    planned: 'Zaplanowano',\n    incomes: 'Wpływy',\n    leftToPlan: 'Pozostało do zaplanowania',\n    expenses: 'Wydatki',\n    currentMonth: 'Bieżący miesiąc',\n    noProblems: 'Wszystko w porządku',\n    problems: {\n      title: 'Problemy',\n      overplanned: 'Plany na bieżący miesiąc przekraczają wpływy',\n      underplanned: 'Część środków jest nierozplanowana',\n      expensesExceedPlans: envelope =>\n        `Wydatki przekroczyły zaplanowany budżet na kopercie \"${envelope}\"`,\n      envelopeOverLimit: envelope =>\n        `Limit dla koperty \"${envelope}\" został przekroczony`,\n      negativeAccountBalance: account =>\n        `Bilans na koncie \"${account}\" jest ujemny`,\n      monthNotEnded: 'Miesiąc się jeszcze nie skończył',\n    },\n    buttons: {\n      closeMonth: 'Zamknij miesiąc',\n    },\n  },\n  accounts: {\n    table: {\n      title: 'Konta',\n      columns: {\n        balance: 'Bilans',\n        name: 'Nazwa',\n      },\n    },\n    expensesTableTitle: 'Wydatki',\n    inTransfersTableTitle: 'Przelewy przychodzące',\n    outTransfersTableTitle: 'Przelewy wychodzące',\n    modal: {\n      createTitle: 'Dodaj nowe konto',\n      editTitle: 'Edytuj konto',\n      labels: {\n        name: 'Nazwa',\n      },\n    },\n  },\n  envelopes: {\n    table: {\n      title: 'Koperty',\n      columns: {\n        balance: 'Bilans',\n        name: 'Nazwa',\n        limit: 'Limit',\n        overLimit: 'Ponad limit',\n      },\n    },\n    expensesTableTitle: 'Wydatki',\n    inPlansTableTitle: 'Plany przychodzące',\n    outPlansTableTitle: 'Plany wychodzące',\n    modal: {\n      createTitle: 'Dodaj nową kopertę',\n      editTitle: 'Edytuj kopertę',\n      labels: {\n        name: 'Nazwa',\n        limit: 'Limit',\n      },\n    },\n  },\n  categories: {\n    table: {\n      title: 'Kategorie',\n      columns: {\n        name: 'Nazwa',\n        envelope: 'Koperta',\n        description: 'Opis',\n      },\n    },\n    modal: {\n      createTitle: 'Dodaj nową kategorię',\n      editTitle: 'Edytuj kategorię',\n      labels: {\n        name: 'Nazwa',\n        envelope: 'Koperta',\n        description: 'Opis',\n      },\n    },\n  },\n  plans: {\n    table: {\n      title: 'Plany',\n      columns: {\n        title: 'Tytuł',\n        fromEnvelope: 'Z',\n        toEnvelope: 'Do',\n        currentAmount: 'Kwota',\n      },\n    },\n    modal: {\n      createTitle: 'Dodaj nowy plan',\n      editTitle: 'Edytuj plan',\n      labels: {\n        title: 'Tytuł',\n        fromEnvelope: 'Z',\n        toEnvelope: 'Do',\n        amount: 'Kwota',\n        recurring: 'Cyklicznie',\n      },\n    },\n  },\n  transfers: {\n    table: {\n      title: 'Przelewy',\n      columns: {\n        title: 'Tytuł',\n        fromAccount: 'Z',\n        toAccount: 'Do',\n        amount: 'Kwota',\n        date: 'Data',\n      },\n    },\n    modal: {\n      createTitle: 'Dodaj nowy przelew',\n      editTitle: 'Edytuj przelew',\n      labels: {\n        title: 'Tytuł',\n        fromAccount: 'Z',\n        toAccount: 'Do',\n        amount: 'Kwota',\n        date: 'Data',\n      },\n    },\n  },\n  expenses: {\n    table: {\n      title: 'Wydatki',\n      columns: {\n        title: 'Tytuł',\n        totalAmount: 'Kwota',\n        date: 'Data',\n        account: 'Konto',\n      },\n    },\n    modal: {\n      createTitle: 'Dodaj nowy wydatek',\n      editTitle: 'Edytuj wydatek',\n      labels: {\n        title: 'Tytuł',\n        fromAccount: 'Z',\n        toAccount: 'Do',\n        account: 'Konto',\n        date: 'Data',\n        categories: 'Kategorie',\n        amount: 'Kwota',\n        category: 'Kategoria',\n      },\n    },\n  },\n  months: [\n    'Styczeń',\n    'Luty',\n    'Marzec',\n    'Kwiecień',\n    'Maj',\n    'Czerwiec',\n    'Lipiec',\n    'Sierpień',\n    'Wrzesień',\n    'Październik',\n    'Listopad',\n    'Grudzień',\n  ],\n};\n","import * as math from 'mathjs';\n\nexport default class Amount {\n  static parse(string) {\n    if (string === null || string === '') {\n      return null;\n    }\n    const number = math.evaluate(string.replace(/,/g, '.'));\n    return Math.round(number * 100);\n  }\n\n  static isValid(string) {\n    if (string === null || string === '') {\n      return true;\n    }\n\n    try {\n      math.parse(string.replace(/,/g, '.'));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static zero() {\n    return 0;\n  }\n\n  static format(amount, kSeparator = true) {\n    if (amount === null) {\n      return null;\n    }\n\n    const fixed = (amount / 100).toFixed(2);\n    if (!kSeparator) {\n      return fixed;\n    }\n    var parts = fixed.split('.');\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n    return parts.join('.');\n  }\n\n  static prettyFormat(amount) {\n    if (amount === null) return '-';\n    return Amount.format(amount, true);\n  }\n}\n","export function addToList(list, element) {\n  return [...list, element]\n}\n\nexport function removeFromList(list, element) {\n  const idx = list.indexOf(element);\n  if (idx === -1) {\n    return list\n  }\n  return [...list.slice(0, idx), ...list.slice(idx+1, list.length)]\n}\n\nexport function removeFromListByID(list, elementId) {\n  const idx = list.findIndex(e => e.id === elementId);\n  if (idx === -1) {\n    return list\n  }\n  return [...list.slice(0, idx), ...list.slice(idx+1, list.length)]\n}\n\nexport function replaceOnList(list, idx, element) {\n  if (idx < 0 || idx > list.length) {\n    return list\n  }\n  return [...list.slice(0, idx), element, ...list.slice(idx+1, list.length)]\n}\n\nexport function replaceOnListByID(list, element) {\n  const idx = list.findIndex(e => e.id === element.id);\n\n  if (idx === -1) {\n    return list\n  }\n\n  return [...list.slice(0, idx), element, ...list.slice(idx+1, list.length)]\n}","import { useMutation, useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { useBudget } from './budget';\n\nexport const GET_ENVELOPES = gql`\n  query GetEnvelopes($budgetID: ID!) {\n    envelopes(budgetID: $budgetID) {\n      id\n      name\n      balance\n      limit\n    }\n  }\n`;\n\nconst CREATE_ENVELOPE = gql`\n  mutation CreateEnvelope($budgetID: ID!, $input: EnvelopeInput!) {\n    createEnvelope(budgetID: $budgetID, in: $input) {\n      id\n      name\n      balance\n      limit\n    }\n  }\n`;\n\nconst UPDATE_ENVELOPE = gql`\n  mutation UpdateEnvelope($budgetID: ID!, $id: ID!, $input: EnvelopeUpdate!) {\n    updateEnvelope(budgetID: $budgetID, id: $id, in: $input) {\n      id\n      name\n      balance\n      limit\n    }\n  }\n`;\n\nexport function useCreateEnvelope() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CREATE_ENVELOPE, {\n    update: (cache, { data: { createEnvelope } }) => {\n      const { envelopes } = cache.readQuery({\n        query: GET_ENVELOPES,\n        variables: { budgetID: selectedBudget.id },\n      });\n      cache.writeQuery({\n        query: GET_ENVELOPES,\n        variables: { budgetID: selectedBudget.id },\n        data: {\n          envelopes: envelopes.concat([createEnvelope]),\n        },\n      });\n    },\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nexport function useUpdateEnvelope() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(UPDATE_ENVELOPE);\n  const wrapper = (id, input) => {\n    mutation({ variables: { budgetID: selectedBudget.id, id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nexport function useGetEnvelopes() {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_ENVELOPES, {\n    variables: { budgetID: selectedBudget.id },\n  });\n}\n","import { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { useBudget } from './budget';\n\nconst MONTHLY_REPORT_FRAGMENT = gql`\n  fragment MonthlyReport on MonthlyReport {\n    month\n    totalPlannedAmount\n    totalIncomeAmount\n    totalExpenseAmount\n    problems {\n      severity\n      ... on EnvelopeOverLimit {\n        id\n      }\n      ... on NegativeBalanceOnAccount {\n        id\n      }\n      ... on NegativeBalanceOnEnvelope {\n        id\n      }\n      ... on Misplanned {\n        overplanned\n      }\n    }\n  }\n`;\n\nexport const GET_MONTHLY_REPORT = gql`\n  query GetMonthlyReport($budgetID: ID!, $month: Month!) {\n    monthlyReport(budgetID: $budgetID, month: $month) {\n      ...MonthlyReport\n    }\n  }\n  ${MONTHLY_REPORT_FRAGMENT}\n`;\n\nexport function useGetMonthlyReport(month) {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_MONTHLY_REPORT, {\n    variables: { budgetID: selectedBudget.id, month },\n    fetchPolicy: 'network-only',\n  });\n}\n","import { useMutation, useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { removeFromListByID } from '../../util/immutable';\nimport { GET_ACCOUNTS } from './accounts';\nimport { useBudget } from './budget';\nimport { GET_ENVELOPES } from './envelopes';\nimport { GET_MONTHLY_REPORT } from './monthlyReport';\n\nconst EXPENSE_FRAGMENT = gql`\n  fragment Expense on Expense {\n    id\n    title\n    account {\n      id\n      name\n    }\n    categories {\n      category {\n        id\n        name\n      }\n      amount\n    }\n    totalAmount\n    date\n  }\n`;\n\nexport const GET_EXPENSES = gql`\n  query getExpenses($budgetID: ID!, $month: Month!) {\n    monthlyReport(budgetID: $budgetID, month: $month) {\n      expenses {\n        ...Expense\n      }\n    }\n  }\n\n  ${EXPENSE_FRAGMENT}\n`;\n\nconst CREATE_EXPENSE = gql`\n  mutation createExpense($budgetID: ID!, $input: ExpenseInput!) {\n    createExpense(budgetID: $budgetID, in: $input) {\n      ...Expense\n    }\n  }\n\n  ${EXPENSE_FRAGMENT}\n`;\n\nconst UPDATE_EXPENSE = gql`\n  mutation updateExpense($budgetID: ID!, $id: ID!, $input: ExpenseUpdate!) {\n    updateExpense(budgetID: $budgetID, id: $id, in: $input) {\n      ...Expense\n    }\n  }\n\n  ${EXPENSE_FRAGMENT}\n`;\n\nexport function useCreateExpense() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CREATE_EXPENSE, {\n    update: (cache, { data: { createExpense } }) => {\n      const { monthlyReport } = cache.readQuery({\n        query: GET_EXPENSES,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      });\n      cache.writeQuery({\n        query: GET_EXPENSES,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n        data: {\n          monthlyReport: {\n            ...monthlyReport,\n            expenses: monthlyReport.expenses.concat([createExpense]),\n          },\n        },\n      });\n    },\n    refetchQueries: () => [\n      { query: GET_ACCOUNTS, variables: { budgetID: selectedBudget.id } },\n      { query: GET_ENVELOPES, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nexport function useUpdateExpense() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(UPDATE_EXPENSE, {\n    refetchQueries: () => [\n      { query: GET_ACCOUNTS, variables: { budgetID: selectedBudget.id } },\n      { query: GET_ENVELOPES, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = (id, input) => {\n    mutation({ variables: { budgetID: selectedBudget.id, id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nexport function useGetExpenses(month) {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_EXPENSES, {\n    variables: { budgetID: selectedBudget.id, month },\n  });\n}\n\nconst DELETE_EXPENSE = gql`\n  mutation deleteExpense($budgetID: ID!, $id: ID!) {\n    deleteExpense(budgetID: $budgetID, id: $id) {\n      id\n    }\n  }\n`;\n\nexport function useDeleteExpense() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(DELETE_EXPENSE, {\n    update: (cache, { data: { deleteExpense } }) => {\n      const { monthlyReport } = cache.readQuery({\n        query: GET_EXPENSES,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      });\n      cache.writeQuery({\n        query: GET_EXPENSES,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n        data: {\n          monthlyReport: {\n            ...monthlyReport,\n            expenses: removeFromListByID(\n              monthlyReport.expenses,\n              deleteExpense.id\n            ),\n          },\n        },\n      });\n    },\n    refetchQueries: () => [\n      { query: GET_ACCOUNTS, variables: { budgetID: selectedBudget.id } },\n      { query: GET_ENVELOPES, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = id => {\n    mutation({ variables: { budgetID: selectedBudget.id, id } });\n  };\n  return [wrapper, ...rest];\n}\n","import { useMutation, useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { removeFromListByID } from '../../util/immutable';\nimport { useBudget } from './budget';\nimport { GET_ENVELOPES } from './envelopes';\nimport { GET_MONTHLY_REPORT } from './monthlyReport';\n\nconst PLAN_FRAGMENT = gql`\n  fragment Plan on Plan {\n    id\n    title\n    fromEnvelope {\n      id\n      name\n    }\n    toEnvelope {\n      id\n      name\n    }\n    currentAmount\n    recurringAmount\n  }\n`;\n\nexport const GET_CURRENT_PLANS = gql`\n  query getCurrentPlans($budgetID: ID!) {\n    budget(budgetID: $budgetID) {\n      currentMonth {\n        plans {\n          ...Plan\n        }\n      }\n    }\n  }\n  ${PLAN_FRAGMENT}\n`;\n\nexport function useGetCurrentPlans() {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_CURRENT_PLANS, {\n    variables: { budgetID: selectedBudget.id },\n  });\n}\n\nconst CREATE_PLAN = gql`\n  mutation createPlan($budgetID: ID!, $input: PlanInput!) {\n    createPlan(budgetID: $budgetID, in: $input) {\n      ...Plan\n    }\n  }\n  ${PLAN_FRAGMENT}\n`;\n\nexport function useCreatePlan() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CREATE_PLAN, {\n    update: (cache, { data: { createPlan } }) => {\n      const { budget } = cache.readQuery({\n        query: GET_CURRENT_PLANS,\n        variables: { budgetID: selectedBudget.id },\n      });\n      cache.writeQuery({\n        query: GET_CURRENT_PLANS,\n        variables: { budgetID: selectedBudget.id },\n        data: {\n          budget: {\n            ...budget,\n            currentMonth: {\n              ...budget.currentMonth,\n              plans: budget.currentMonth.plans.concat([createPlan]),\n            },\n          },\n        },\n      });\n    },\n    refetchQueries: () => [\n      { query: GET_ENVELOPES, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nconst UPDATE_PLAN = gql`\n  mutation updatePlan($budgetID: ID!, $id: ID!, $input: PlanUpdate!) {\n    updatePlan(budgetID: $budgetID, id: $id, in: $input) {\n      ...Plan\n    }\n  }\n  ${PLAN_FRAGMENT}\n`;\n\nexport function useUpdatePlan() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(UPDATE_PLAN, {\n    refetchQueries: () => [\n      { query: GET_ENVELOPES, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = (id, input) => {\n    mutation({ variables: { budgetID: selectedBudget.id, id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nconst DELETE_PLAN = gql`\n  mutation deletePlan($budgetID: ID!, $id: ID!) {\n    deletePlan(budgetID: $budgetID, id: $id) {\n      id\n    }\n  }\n`;\n\nexport function useDeletePlan() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(DELETE_PLAN, {\n    update: (cache, { data: { deletePlan } }) => {\n      const { budget } = cache.readQuery({\n        query: GET_CURRENT_PLANS,\n        variables: { budgetID: selectedBudget.id },\n      });\n      cache.writeQuery({\n        query: GET_CURRENT_PLANS,\n        variables: { budgetID: selectedBudget.id },\n        data: {\n          budget: {\n            ...budget,\n            currentMonth: {\n              ...budget.currentMonth,\n              plans: removeFromListByID(\n                budget.currentMonth.plans,\n                deletePlan.id\n              ),\n            },\n          },\n        },\n      });\n    },\n    refetchQueries: () => [\n      { query: GET_ENVELOPES, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = id => {\n    mutation({ variables: { budgetID: selectedBudget.id, id } });\n  };\n  return [wrapper, ...rest];\n}\n","import { useMutation, useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { removeFromListByID } from '../../util/immutable';\nimport { GET_ACCOUNTS } from './accounts';\nimport { useBudget } from './budget';\nimport { GET_MONTHLY_REPORT } from './monthlyReport';\n\nconst TRANSFER_FRAGMENT = gql`\n  fragment Transfer on Transfer {\n    id\n    title\n    fromAccount {\n      id\n      name\n    }\n    toAccount {\n      id\n      name\n    }\n    amount\n    date\n  }\n`;\n\nexport const GET_CURRENT_TRANSFERS = gql`\n  query getCurrentTransfers($budgetID: ID!) {\n    budget(budgetID: $budgetID) {\n      currentMonth {\n        transfers {\n          ...Transfer\n        }\n      }\n    }\n  }\n  ${TRANSFER_FRAGMENT}\n`;\n\nexport const GET_TRANSFERS = gql`\n  query getTransfers($budgetID: ID!, $month: Month!) {\n    monthlyReport(budgetID: $budgetID, month: $month) {\n      transfers {\n        ...Transfer\n      }\n    }\n  }\n  ${TRANSFER_FRAGMENT}\n`;\n\nexport function useGetCurrentTransfers() {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_CURRENT_TRANSFERS, {\n    variables: { budgetID: selectedBudget.id },\n  });\n}\n\nexport function useGetTransfers(month) {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_TRANSFERS, {\n    variables: { budgetID: selectedBudget.id, month },\n  });\n}\n\nconst CREATE_TRANSFER = gql`\n  mutation createTransfer($budgetID: ID!, $input: TransferInput!) {\n    createTransfer(budgetID: $budgetID, in: $input) {\n      ...Transfer\n    }\n  }\n  ${TRANSFER_FRAGMENT}\n`;\n\nexport function useCreateTransfer() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CREATE_TRANSFER, {\n    update: (cache, { data: { createTransfer } }) => {\n      const { monthlyReport } = cache.readQuery({\n        query: GET_TRANSFERS,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      });\n      cache.writeQuery({\n        query: GET_TRANSFERS,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n        data: {\n          monthlyReport: {\n            ...monthlyReport,\n            transfers: monthlyReport.transfers.concat([createTransfer]),\n          },\n        },\n      });\n    },\n    refetchQueries: () => [\n      { query: GET_ACCOUNTS, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nconst UPDATE_TRANSFER = gql`\n  mutation updateTransfer($budgetID: ID!, $id: ID!, $input: TransferUpdate!) {\n    updateTransfer(budgetID: $budgetID, id: $id, in: $input) {\n      ...Transfer\n    }\n  }\n  ${TRANSFER_FRAGMENT}\n`;\n\nexport function useUpdateTransfer() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(UPDATE_TRANSFER, {\n    refetchQueries: () => [\n      { query: GET_ACCOUNTS, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = (id, input) => {\n    mutation({ variables: { budgetID: selectedBudget.id, id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nconst DELETE_TRANSFER = gql`\n  mutation deleteTransfer($budgetID: ID!, $id: ID!) {\n    deleteTransfer(budgetID: $budgetID, id: $id) {\n      id\n    }\n  }\n`;\n\nexport function useDeleteTranfer() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(DELETE_TRANSFER, {\n    update: (cache, { data: { deleteTransfer } }) => {\n      const { monthlyReport } = cache.readQuery({\n        query: GET_TRANSFERS,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      });\n      cache.writeQuery({\n        query: GET_TRANSFERS,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n        data: {\n          monthlyReport: {\n            ...monthlyReport,\n            transfers: removeFromListByID(\n              monthlyReport.transfers,\n              deleteTransfer.id\n            ),\n          },\n        },\n      });\n    },\n    refetchQueries: () => [\n      { query: GET_ACCOUNTS, variables: { budgetID: selectedBudget.id } },\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = id => {\n    mutation({ variables: { budgetID: selectedBudget.id, id } });\n  };\n  return [wrapper, ...rest];\n}\n","import { useMutation, useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\nimport { GET_EXPENSES } from './expenses';\nimport { GET_MONTHLY_REPORT } from './monthlyReport';\nimport { GET_CURRENT_PLANS } from './plans';\nimport { GET_CURRENT_TRANSFERS } from './transfers';\n\nexport const BudgetContext = createContext();\nexport const useBudget = () => useContext(BudgetContext);\n\nconst GET_BUDGETS = gql`\n  query GetBudgets {\n    budgets {\n      id\n      name\n      currentMonth {\n        month\n      }\n    }\n  }\n`;\n\nconst storageKey = 'LAST-CHOSEN-BUDGET-ID';\n\nexport function BudgetProvider({ children }) {\n  const [selectedBudget, setSelectedBudget] = useState(null);\n  const { loading, error, data } = useQuery(GET_BUDGETS);\n\n  useEffect(() => {\n    if (selectedBudget) {\n      sessionStorage.setItem(storageKey, selectedBudget.id);\n    }\n  }, [selectedBudget]);\n\n  useEffect(() => {\n    if (!selectedBudget && data && data.budgets) {\n      const lastChosenID = sessionStorage.getItem(storageKey);\n      const lastChosen = data.budgets.find(b => b.id === lastChosenID);\n      if (lastChosen) {\n        setSelectedBudget(lastChosen);\n      }\n    }\n  }, [data, selectedBudget]);\n\n  const value = {\n    selectedBudget,\n    setSelectedBudget,\n    loading,\n    error,\n    budgets: !loading && !error ? data.budgets : [],\n  };\n\n  if (error) {\n    console.error(error);\n  }\n  return (\n    <BudgetContext.Provider value={value}>{children}</BudgetContext.Provider>\n  );\n}\n\nBudgetProvider.propTypes = {\n  children: PropTypes.node,\n};\n\nconst CLOSE_CURRENT_MONTH = gql`\n  mutation closeMonth($budgetID: ID!) {\n    closeCurrentMonth(budgetID: $budgetID) {\n      id\n    }\n  }\n`;\n\nexport function useCloseCurrentMonth() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CLOSE_CURRENT_MONTH, {\n    refetchQueries: () => [\n      {\n        query: GET_MONTHLY_REPORT,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth,\n        },\n      },\n      {\n        query: GET_CURRENT_PLANS,\n        variables: { budgetID: selectedBudget.id },\n      },\n      {\n        query: GET_CURRENT_TRANSFERS,\n        variables: { budgetID: selectedBudget.id },\n      },\n      {\n        query: GET_EXPENSES,\n        variables: {\n          budgetID: selectedBudget.id,\n          month: selectedBudget.currentMonth.month,\n        },\n      },\n    ],\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n","import gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { useBudget } from './budget';\n\nexport const GET_ACCOUNTS = gql`\n  query GetAccounts($budgetID: ID!) {\n    accounts(budgetID: $budgetID) {\n      id\n      name\n      balance\n    }\n  }\n`;\n\nexport function useGetAccounts() {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_ACCOUNTS, {\n    variables: { budgetID: selectedBudget.id },\n  });\n}\n\nconst CREATE_ACCOUNT = gql`\n  mutation CreateAccount($budgetID: ID!, $input: AccountInput!) {\n    createAccount(budgetID: $budgetID, in: $input) {\n      id\n      name\n      balance\n    }\n  }\n`;\n\nexport function useCreateAccount() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CREATE_ACCOUNT, {\n    update: (cache, { data: { createAccount } }) => {\n      const { accounts } = cache.readQuery({\n        query: GET_ACCOUNTS,\n        variables: { budgetID: selectedBudget.id },\n      });\n      cache.writeQuery({\n        query: GET_ACCOUNTS,\n        variables: { budgetID: selectedBudget.id },\n        data: {\n          accounts: accounts.concat([createAccount]),\n        },\n      });\n    },\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nconst UPDATE_ACCOUNT = gql`\n  mutation UpdateAccount($budgetID: ID!, $id: ID!, $input: AccountUpdate!) {\n    updateAccount(budgetID: $budgetID, id: $id, in: $input) {\n      id\n      name\n      balance\n    }\n  }\n`;\n\nexport function useUpdateAccount() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(UPDATE_ACCOUNT);\n  const wrapper = (id, input) => {\n    mutation({ variables: { budgetID: selectedBudget.id, id, input } });\n  };\n  return [wrapper, ...rest];\n}\n","import './Combobox.css';\n\nimport classnames from 'classnames';\nimport React, {\n  ButtonHTMLAttributes,\n  ChangeEvent,\n  ReactNode,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { Button, Dropdown, FormControl, InputGroup } from 'react-bootstrap';\n\nimport { Variant } from '../../bootstrap.typed';\n\ninterface Props {\n  disabled?: boolean;\n  allowedValues: { id: string; label: string }[];\n  _ref?: { current: any };\n  defaultValue?: string;\n  className?: string;\n  required?: boolean;\n  'aria-label': string;\n  variant?: Variant;\n  prependLabel?: string;\n}\n\nexport default function Combobox({\n  disabled,\n  allowedValues,\n  _ref,\n  defaultValue: defaultID,\n  className,\n  required,\n  'aria-label': ariaLabel,\n  variant = 'secondary',\n  prependLabel,\n}: Props) {\n  function valueByID(id: string) {\n    return allowedValues.find(v => v.id === id);\n  }\n\n  const valueByLabel = useCallback(\n    label => allowedValues.find(v => v.label === label),\n    [allowedValues]\n  );\n\n  const [show, setShow] = useState(false);\n\n  const defaultValue = defaultID ? valueByID(defaultID) : { label: '' };\n  const [filter, setFilter] = useState(defaultValue ? defaultValue.label : '');\n\n  const dropdownRef = useRef<HTMLDivElement>();\n\n  const filtered = filter\n    ? allowedValues.filter(v =>\n        v.label.toLowerCase().includes(filter.toLowerCase())\n      )\n    : allowedValues;\n\n  useEffect(() => {\n    if (_ref) {\n      _ref.current = { value: defaultID };\n    }\n  }, [_ref, defaultID]);\n\n  useEffect(() => {\n    function isClickedInside(event: MouseEvent) {\n      return (\n        !dropdownRef.current ||\n        dropdownRef.current!.contains(event.target as Node)\n      );\n    }\n\n    function handleClickOutside(event: MouseEvent) {\n      if (isClickedInside(event)) {\n        return;\n      }\n      setShow(false);\n      if (!valueByLabel(filter)) {\n        setFilter('');\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [filter, valueByLabel]);\n\n  function onInputChange(e: ChangeEvent<HTMLInputElement>) {\n    const label = e.target.value;\n    setFilter(label);\n    const selected = valueByLabel(label);\n    if (selected && _ref) {\n      _ref.current = { value: selected.id };\n    } else {\n      setShow(true);\n    }\n  }\n\n  function onClick(id: string) {\n    const selected = valueByID(id);\n    if (selected) {\n      setFilter(selected.label);\n    }\n    if (_ref) {\n      _ref.current = { value: id };\n    }\n  }\n\n  return (\n    <Dropdown\n      // @ts-ignore\n      ref={dropdownRef}\n      show={show}\n      onToggle={isOpen => {\n        setShow(isOpen);\n      }}\n      className={classnames('combobox', className)}\n    >\n      <Dropdown.Toggle\n        // @ts-ignore\n        as={Toggle}\n      >\n        {({ className, ...props }: ButtonHTMLAttributes<HTMLButtonElement>) => (\n          <>\n            <FormControl\n              value={filter}\n              type='text'\n              onChange={onInputChange}\n              disabled={disabled}\n              required={required}\n              aria-label={ariaLabel}\n            />\n            <Button\n              variant={variant}\n              className={classnames(\n                'dropdown-toggle-split',\n                'no-arrow',\n                className\n              )}\n              tabIndex={-1}\n              disabled={disabled}\n              type='button'\n              {...props}\n            />\n          </>\n        )}\n      </Dropdown.Toggle>\n      <Dropdown.Menu>\n        {filtered.map(v => (\n          <Dropdown.Item\n            eventKey={v.id}\n            key={v.id}\n            onClick={() => onClick(v.id)}\n          >\n            {v.label}\n          </Dropdown.Item>\n        ))}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n}\n\ninterface ToggleProps {\n  children(props: object): ReactNode;\n}\n\nconst Toggle = forwardRef(({ children, ...props }: ToggleProps, ref) => {\n  return (\n    <InputGroup\n      // @ts-ignore\n      ref={ref}\n    >\n      {children(props)}\n    </InputGroup>\n  );\n});\n","import { IconProp } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classnames from 'classnames';\nimport React, { MouseEvent } from 'react';\n\nimport { Size, Variant } from '../../bootstrap.typed';\n\ninterface Props {\n  icon: IconProp;\n  variant: Variant;\n  onClick(event: MouseEvent<HTMLButtonElement>): void;\n  className?: string;\n  borderless?: boolean;\n  size?: Size;\n}\n\nexport default function IconButton({\n  icon,\n  variant,\n  className,\n  onClick,\n  borderless,\n  size,\n  ...props\n}: Props) {\n  const prefix = borderless ? 'text' : 'btn';\n  const classes = classnames('btn', className, {\n    [`${prefix}-${variant}`]: variant,\n    [`${prefix}-${size}`]: size,\n    'bg-transparent': borderless,\n    'border-0': borderless,\n    'p-0': borderless,\n    'mx-1': borderless,\n  });\n\n  function handleOnClick(e: MouseEvent<HTMLButtonElement>) {\n    e.preventDefault();\n    onClick && onClick(e);\n  }\n\n  return (\n    <button className={classes} onClick={handleOnClick} {...props}>\n      <FontAwesomeIcon icon={icon} />\n    </button>\n  );\n}\n","import React, { ComponentType, MouseEvent, useState } from 'react';\nimport { Modal } from 'react-bootstrap';\n\ninterface ButtonProps {\n  onClick(event: MouseEvent<HTMLButtonElement>): void;\n}\n\ninterface ModalContentProps {\n  onHide(): void;\n}\n\ninterface Props {\n  button: ComponentType<ButtonProps>;\n  modalContent: ComponentType<ModalContentProps>;\n}\n\nexport default function OpenModalButton({\n  button: Button,\n  modalContent: ModalContent,\n  ...props\n}: Props) {\n  const [show, setShow] = useState<boolean>(false);\n  const onHide = () => setShow(false);\n  const onClick = () => setShow(true);\n\n  return (\n    <span onClick={e => e.stopPropagation()}>\n      <Button onClick={onClick} />\n      <Modal show={show} onHide={onHide} {...props}>\n        <ModalContent onHide={onHide} />\n      </Modal>\n    </span>\n  );\n}\n","import PropTypes from 'prop-types';\nimport React, { useContext, useState } from 'react';\n\nconst SBAdmin2Context = React.createContext();\n\nexport function SBAdmin2Provider({ user, logout, children }) {\n  const [sidebarToggled, setSidebarToggled] = useState(false);\n  return (\n    <SBAdmin2Context.Provider\n      value={{\n        sidebarToggled,\n        user,\n        logout,\n        toggleSidebar: () => setSidebarToggled(current => !current),\n      }}\n    >\n      {children}\n    </SBAdmin2Context.Provider>\n  );\n}\n\nSBAdmin2Provider.propTypes = {\n  children: PropTypes.node,\n  logout: PropTypes.func.isRequired,\n  user: PropTypes.shape({\n    picture: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport const useSBAdmin2 = () => useContext(SBAdmin2Context);\n","import React, { createContext, useContext } from 'react';\nimport { useSBAdmin2 } from './context';\nimport PropTypes from 'prop-types';\nimport { capitalize } from '../../util/capitalize';\n\nexport const DictionaryContext = createContext();\n\nexport function DictionaryProvider({ dictionaries, children }) {\n  const { user } = useSBAdmin2();\n  return (\n    <DictionaryContext.Provider value={dictionaries[user.locale]}>\n      {children}\n    </DictionaryContext.Provider>\n  );\n}\n\nDictionaryProvider.propTypes = {\n  dictionaries: PropTypes.object,\n  children: PropTypes.node,\n};\n\nexport const useDictionary = () => useContext(DictionaryContext);\n\nexport function withDictionary(prop, Component, readPropName) {\n  return props => {\n    readPropName = readPropName || `read${capitalize(prop)}`;\n    const readDict = props[readPropName];\n    const newProps = { ...props };\n    delete newProps[readPropName];\n    const dictionary = useDictionary();\n    if (readDict) {\n      newProps[prop] = readDict(dictionary);\n    }\n    return <Component {...newProps} />;\n  };\n}\n","export function capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Breadcrumb } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nimport { withDictionary } from '../../language';\n\nfunction LinkBreadcrumb({ text, ...props }) {\n  return (\n    <li className='breadcrumb-item'>\n      <Link {...props}>{text}</Link>\n    </li>\n  );\n}\n\nconst BreadcrumbItem = withDictionary('text', LinkBreadcrumb);\n\nfunction PageHeader({ children, title, actions, breadcrumbs }) {\n  return (\n    <>\n      <h1 className='h3 text-gray-800 d-flex justify-content-between'>\n        <span>\n          {title}\n          {actions}\n        </span>\n        {children && <div>{children}</div>}\n      </h1>\n      <Breadcrumb listProps={{ className: 'bg-transparent pl-0 pt-0' }}>\n        {breadcrumbs &&\n          breadcrumbs.map(b => <BreadcrumbItem as={Link} key={b.to} {...b} />)}\n        <Breadcrumb.Item active>{title}</Breadcrumb.Item>\n      </Breadcrumb>\n    </>\n  );\n}\n\nPageHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n\nexport default withDictionary('title', PageHeader);\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport PageHeader from './PageHeader';\n\nexport default function Page({ children }) {\n  return <div className='container-fluid'>{children}</div>;\n}\n\nPage.propTypes = {\n  children: PropTypes.node,\n};\n\nPage.Header = PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withDictionary } from '../../language';\n\nfunction PanelTitle({ children, title, className }) {\n  const classNames = classnames(\n    'm-0',\n    'font-weight-bold',\n    'text-primary',\n    className\n  );\n  return (\n    <h6 className={classNames}>\n      {children}\n      {title}\n    </h6>\n  );\n}\n\nPanelTitle.propTypes = {\n  title: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nexport default withDictionary('title', PanelTitle);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport PanelTitle from './PanelTitle';\nimport PanelHeader from './PanelHeader';\nimport PanelBody from './PanelBody';\n\nexport default function Panel({ children, className }) {\n  return (\n    <div className={classnames('card', 'shadow', 'mb-4', className)}>\n      {children}\n    </div>\n  );\n}\n\nPanel.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nPanel.Title = PanelTitle;\nPanel.Header = PanelHeader;\nPanel.Body = PanelBody;\n","import { IconProp } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classnames from 'classnames';\nimport React, { ButtonHTMLAttributes } from 'react';\n\nimport { Size, Variant } from '../../bootstrap.typed';\n\ninterface Props {\n  icon: IconProp;\n  variant: Variant;\n  size?: Size;\n  className?: string;\n  disabled?: boolean;\n  _ref?: { current: any };\n  children?: string;\n}\n\nexport default function SplitButton({\n  icon,\n  variant,\n  size,\n  className,\n  disabled,\n  _ref,\n  children,\n  ...props\n}: Props & ButtonHTMLAttributes<HTMLButtonElement>) {\n  const classNames = classnames('btn', 'btn-icon-split', className, {\n    disabled,\n    [`btn-${size}`]: size,\n    [`btn-${variant}`]: variant,\n  });\n\n  return (\n    <button\n      className={classNames}\n      disabled={disabled}\n      ref={_ref}\n      aria-label={children}\n      {...props}\n    >\n      <span className='icon text-white-50'>\n        <FontAwesomeIcon icon={icon} />\n      </span>\n      <span className='text'>{children}</span>\n    </button>\n  );\n}\n","import React from 'react';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nexport default function PanelHeader({ className, ...props }) {\n  return <div className={classnames(className, 'card-header')} {...props} />;\n}\n\nPanelHeader.propTypes = {\n  className: PropTypes.string,\n};\n","import React from 'react';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nexport default function PanelBody({ className, children }) {\n  return <div className={classnames(className, 'card-body')}>{children}</div>;\n}\n\nPanelBody.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n","import React from 'react';\nimport BootstrapTable, {\n  BootstrapTableProps,\n  Column,\n} from 'react-bootstrap-table-next';\n\nimport { withDictionary } from '../../language';\n\ninterface Dictionary {\n  [key: string]: string;\n}\n\ninterface Props<fieldIds extends string = string>\n  extends BootstrapTableProps<fieldIds> {\n  columnNames: Dictionary;\n}\n\nfunction Table({ columns, columnNames, ...props }: Props) {\n  return (\n    <BootstrapTable\n      bootstrap4\n      columns={addColumnNames(columns, columnNames)}\n      {...props}\n    />\n  );\n}\n\nfunction addColumnNames<fieldIds extends string = string>(\n  columns: Column<fieldIds>[],\n  dictionary: Dictionary\n) {\n  return columns.map(c => ({ ...c, text: dictionary[c.dataField] || '' }));\n}\n\nexport default withDictionary('columnNames', Table);\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { withDictionary } from '../../language';\nimport Panel from '../Panel/Panel';\nimport Table from '../Table/Table';\n\nfunction TablePanel({\n  title,\n  columns,\n  headerButtons,\n  panelClassName,\n  wrapper: Wrapper,\n  wrapperProps,\n  hiddenColumns,\n  visibleColumns,\n  data,\n  filters,\n  onSelect,\n  selected,\n  mappers = [],\n  ...props\n}) {\n  const paddedFirstColumn = {\n    ...columns[0],\n    classes: 'pl-3',\n    headerClasses: 'pl-3',\n  };\n  const modifiedColumns = [\n    paddedFirstColumn,\n    ...columns.slice(1, columns.length),\n  ];\n\n  const selectRow = !onSelect\n    ? undefined\n    : {\n        mode: 'radio',\n        clickToSelect: true,\n        hideSelectColumn: true,\n        classes: 'text-white bg-primary selected',\n        onSelect,\n        selected: selected ? [selected] : [],\n      };\n\n  function isColumnHidden(c) {\n    const isHidden =\n      hiddenColumns && hiddenColumns.some(hc => c.dataField === hc);\n    const isVisible =\n      visibleColumns && visibleColumns.some(vc => c.dataField === vc);\n    return isHidden || (visibleColumns && !isVisible);\n  }\n\n  const wihtouHidden = modifiedColumns.map(c => ({\n    ...c,\n    hidden: isColumnHidden(c),\n  }));\n\n  function filtersMatch(row) {\n    return filters.every(f => f(row));\n  }\n\n  const filteredData = data.filter(row => filtersMatch(row));\n  const mappedData = mappers.reduce(\n    (acc, mapper) => acc.map(mapper),\n    filteredData\n  );\n\n  return (\n    <Wrapper className={panelClassName} {...wrapperProps}>\n      <Wrapper.Header className='p-2 pl-3'>\n        <div className='d-flex justify-content-between align-items-center'>\n          <Wrapper.Title title={title} className='table-panel--title' />\n          <div>{headerButtons}</div>\n        </div>\n      </Wrapper.Header>\n\n      <Wrapper.Body className='p-0'>\n        <Table\n          classes='table-layout-auto table-sm m-0'\n          striped\n          hover\n          bordered={false}\n          columns={wihtouHidden}\n          data={mappedData}\n          selectRow={selectRow}\n          {...props}\n        />\n      </Wrapper.Body>\n    </Wrapper>\n  );\n}\n\nTablePanel.propTypes = {\n  wrapper: PropTypes.elementType,\n  wrapperProps: PropTypes.object,\n  title: PropTypes.string.isRequired,\n  headerButtons: PropTypes.node,\n  columns: PropTypes.array.isRequired,\n  panelClassName: PropTypes.string,\n  hiddenColumns: PropTypes.arrayOf(PropTypes.string),\n  filters: PropTypes.arrayOf(PropTypes.func),\n  data: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nTablePanel.defaultProps = {\n  wrapper: Panel,\n  wrapperProps: {},\n  hiddenColumns: [],\n  filters: [],\n};\n\nexport default withDictionary('title', TablePanel);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Page from './components/Page/Page';\n\nexport function NotFoundPage() {\n  return (\n    <Page>\n      <div className=\"text-center\">\n        <div className=\"error mx-auto\" data-text=\"404\">\n          404\n        </div>\n        <p className=\"lead text-gray-800 mb-5\">Page Not Found</p>\n        <p className=\"text-gray-500 mb-0\">\n          It looks like you found a glitch in the matrix...\n        </p>\n        <Link to=\"/\">&larr; Back to Dashboard</Link>\n      </div>\n    </Page>\n  );\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useLocation } from 'react-router';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nfunction oneOfRoutsMatchesLocation(sections, location) {\n  return sections.some(({ routes }) =>\n    routes.some(({ to }) => location.pathname === to)\n  );\n}\n\nexport default function SidebarCollapsibleLink({\n  name,\n  parent,\n  sections,\n  faIcon,\n}) {\n  const location = useLocation();\n  const isActive = oneOfRoutsMatchesLocation(sections, location);\n  const classNames = classnames('nav-item', { active: isActive });\n  const id = 'sidebar--' + name;\n  const iconClasses = classnames('fas', 'fa-fw', `fa-${faIcon}`);\n  return (\n    <li className={classNames}>\n      <span\n        className=\"nav-link collapsed\"\n        data-toggle=\"collapse\"\n        data-target={'#' + id}\n        aria-expanded=\"true\"\n        aria-controls={id}\n      >\n        <i className={iconClasses}></i>\n        <span>{name}</span>\n      </span>\n      <div id={id} className=\"collapse\" data-parent={'#' + parent}>\n        <div className=\"bg-white py-2 collapse-inner rounded\">\n          {sections.map(({ name, routes }) => {\n            return (\n              <React.Fragment key={name}>\n                <h6 className=\"collapse-header\">{name}:</h6>\n                {routes.map(({ to, label }) => {\n                  return (\n                    <NavLink key={label} className=\"collapse-item\" to={to}>\n                      {label}\n                    </NavLink>\n                  );\n                })}\n              </React.Fragment>\n            );\n          })}\n        </div>\n      </div>\n    </li>\n  );\n}\n\nSidebarCollapsibleLink.propTypes = {\n  faIcon: PropTypes.string,\n  name: PropTypes.string,\n  parent: PropTypes.string,\n  sections: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string,\n      routes: PropTypes.arrayOf(\n        PropTypes.shape({\n          label: PropTypes.string,\n          to: PropTypes.string,\n        })\n      ).isRequired,\n    })\n  ),\n};\n","import React from 'react';\nimport classnames from 'classnames';\nimport { NavLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nexport default function SidebarSimpleLink({ name, to, faIcon }) {\n  const iconClasses = classnames('fas', 'fa-fw', `fa-${faIcon}`);\n  return (\n    <li className=\"nav-item\">\n      <NavLink className=\"nav-link\" exact to={to}>\n        <i className={iconClasses} />\n        <span>{name}</span>\n      </NavLink>\n    </li>\n  );\n}\n\nSidebarSimpleLink.propTypes = {\n  faIcon: PropTypes.string,\n  name: PropTypes.string,\n  to: PropTypes.string,\n};\n","import React from 'react';\nimport SidebarCollapsibleLink from './SidebarCollapsibleLink';\nimport SidebarSimpleLink from './SidebarSimpleLink';\nimport PropTypes from 'prop-types';\n\nexport function SidebarGroup({ group }) {\n  return (\n    <>\n      <hr className=\"sidebar-divider my-1\" />\n      {group.name && <div className=\"sidebar-heading\">{group.name}</div>}\n      {group.entries.map(entry =>\n        entry.to !== undefined ? (\n          <SidebarSimpleLink key={entry.name} {...entry} />\n        ) : (\n          <SidebarCollapsibleLink\n            key={entry.name}\n            parent=\"accordionSidebar\"\n            {...entry}\n          />\n        )\n      )}\n    </>\n  );\n}\n\nSidebarGroup.propTypes = {\n  group: PropTypes.shape({\n    name: PropTypes.string,\n    entries: PropTypes.arrayOf(\n      PropTypes.oneOfType([\n        PropTypes.shape(SidebarCollapsibleLink.propTypes),\n        PropTypes.shape(SidebarSimpleLink.propTypes),\n      ])\n    ).isRequired,\n  }),\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { SidebarGroup } from './SidebarGroup';\nimport { useSBAdmin2 } from '../context';\nimport './Sidebar.css';\n\nexport default function Sidebar({ renderBrandName, renderBrandIcon, config }) {\n  const { sidebarToggled, toggleSidebar } = useSBAdmin2();\n  const classNames = classnames(\n    'navbar-nav',\n    'bg-gradient-primary',\n    'sidebar',\n    'sidebar-dark',\n    'accordion',\n    { toggled: sidebarToggled }\n  );\n  return (\n    <ul className={classNames} id=\"accordionSidebar\">\n      <Link\n        className=\"sidebar-brand d-flex align-items-center justify-content-center\"\n        to=\"/\"\n      >\n        <div className=\"sidebar-brand-icon rotate-n-15\">\n          {renderBrandIcon()}\n        </div>\n        <div className=\"sidebar-brand-text mx-3\">{renderBrandName()}</div>\n      </Link>\n\n      {config.map((group, idx) => (\n        <SidebarGroup key={group.name || idx} group={group} />\n      ))}\n\n      <hr className=\"sidebar-divider d-none d-md-block\" />\n\n      <div className=\"text-center d-none d-md-inline\">\n        <button\n          className=\"rounded-circle border-0\"\n          id=\"sidebarToggle\"\n          onClick={toggleSidebar}\n        ></button>\n      </div>\n    </ul>\n  );\n}\n\nSidebar.propTypes = {\n  config: PropTypes.arrayOf(SidebarGroup.propTypes.group).isRequired,\n  renderBrandIcon: PropTypes.func.isRequired,\n  renderBrandName: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport { SBAdmin2Provider } from './context';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router-dom';\nimport { NotFoundPage } from './NotFoundPage';\nimport Sidebar from './Sidebar/Sidebar';\nimport { DictionaryProvider } from './language';\n\nexport function SBAdmin2({\n  sidebarProps,\n  topbar,\n  user,\n  logout,\n  children,\n  dictionaries,\n  copyright,\n}) {\n  const Topbar = topbar;\n  return (\n    <SBAdmin2Provider user={user} logout={logout}>\n      <DictionaryProvider dictionaries={dictionaries}>\n        <div id=\"wrapper\">\n          <Sidebar {...sidebarProps} />\n          <div id=\"content-wrapper\" className=\"d-flex flex-column\">\n            <div id=\"content\">\n              <Topbar />\n              <Switch>\n                {children}\n                <Route component={NotFoundPage} />\n              </Switch>\n            </div>\n          </div>\n        </div>\n        <footer className=\"sticky-footer bg-white\">\n          <div className=\"container my-auto\">\n            <div className=\"copyright text-center my-auto\">\n              <span>Copyright &copy; {copyright}</span>\n            </div>\n          </div>\n        </footer>\n      </DictionaryProvider>\n    </SBAdmin2Provider>\n  );\n}\n\nSBAdmin2.propTypes = {\n  children: PropTypes.any,\n  copyright: PropTypes.string,\n  sidebarProps: PropTypes.shape(Sidebar.propTypes).isRequired,\n  topbar: PropTypes.elementType.isRequired,\n  user: PropTypes.shape({\n    locale: PropTypes.string,\n    name: PropTypes.string.isRequired,\n    picture: PropTypes.string.isRequired,\n  }).isRequired,\n  logout: PropTypes.func.isRequired,\n  dictionaries: PropTypes.object,\n};\n","import React from 'react';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport PropTypes from 'prop-types';\n\nexport function FormControl({ label, inline, ...props }) {\n  return (\n    <Form.Group className=\"mb-3\" as={!!inline && Row}>\n      <Form.Label column={!!inline}>{label}</Form.Label>\n      <FormControl.Input inline={inline} {...props} />\n    </Form.Group>\n  );\n}\n\nFormControl.Input = ({ inline, formData, feedback, children, ...props }) => {\n  const wrap = inline ? c => <Col sm={inline}>{c}</Col> : c => c;\n  const child = children || (\n    <Form.Control ref={formData} defaultValue={formData.default()} {...props} />\n  );\n  return wrap(\n    <>\n      {child}\n      <Form.Control.Feedback type=\"invalid\">{feedback}</Form.Control.Feedback>\n    </>\n  );\n};\n\nFormControl.propTypes = {\n  formData: PropTypes.shape({ current: PropTypes.any, init: PropTypes.any }),\n  feedback: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  inline: PropTypes.number,\n};\n\nFormControl.defaultProps = {\n  inline: 0,\n};\n","export const Variant = {\n  secondary: 'secondary',\n  primary: 'primary',\n  danger: 'danger',\n  success: 'success',\n  warning: 'warning',\n  white: 'white',\n};\n\nexport const Size = {\n  sm: 'sm',\n  lg: 'lg',\n};\n","import { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport { SplitButton, useDictionary } from '../sbadmin2';\nimport { Size, Variant } from '../sbadmin2/bootstrap';\n\nexport default function CancelButton(props) {\n  const { buttons } = useDictionary();\n  return (\n    <SplitButton\n      variant={Variant.secondary}\n      icon={faTrash}\n      size={Size.sm}\n      type='button'\n      {...props}\n    >\n      {buttons.cancel}\n    </SplitButton>\n  );\n}\n","import { faSave } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport { SplitButton, useDictionary } from '../sbadmin2';\nimport { Size, Variant } from '../sbadmin2/bootstrap';\n\nexport default function SaveButton(props) {\n  const { buttons } = useDictionary();\n\n  return (\n    <SplitButton\n      icon={faSave}\n      size={Size.sm}\n      variant={Variant.primary}\n      type='submit'\n      {...props}\n    >\n      {buttons.save}\n    </SplitButton>\n  );\n}\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Form, Modal } from 'react-bootstrap';\n\nimport CancelButton from '../../common/CancelButton';\nimport SaveButton from '../../common/SaveButton';\n\nexport function FormInModal({ title, onHide, onSave, formData, children }) {\n  const [validated, setValidated] = useState(false);\n  const form = useRef();\n\n  useEffect(() => {\n    if (form.current) {\n      const firstInput = form.current.getElementsByTagName('input')[0];\n      if (firstInput) {\n        firstInput.focus();\n      }\n    }\n  }, []);\n\n  function handleSave(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const isValid = form.current.checkValidity();\n    setValidated(true);\n    if (!isValid) {\n      return;\n    }\n    if (formData.changed()) {\n      const input = formData.value();\n      onSave(input);\n    }\n    onHide();\n    setValidated(false);\n  }\n\n  return (\n    <Form validated={validated} ref={form} onSubmit={handleSave}>\n      <Modal.Header\n        closeButton\n        className='m-0 font-weight-bold text-primary bg-light'\n      >\n        <Modal.Title>{title}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>{children}</Modal.Body>\n      <Modal.Footer className=' bg-light'>\n        <CancelButton onClick={onHide} />\n        <SaveButton onClick={handleSave} />\n      </Modal.Footer>\n    </Form>\n  );\n}\n\nFormInModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  onHide: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n  formData: PropTypes.any.isRequired,\n};\n","import React from 'react';\n\nimport { withDictionary } from '../sbadmin2/language';\n\nfunction Details({ entity, columns, fieldNames }) {\n  return (\n    <div className='mb-3'>\n      <div className='pl-2'>\n        {columns.map(f => {\n          return (\n            <DetailsField\n              key={f.dataField}\n              name={fieldNames[f.dataField]}\n              value={\n                f.formatter\n                  ? f.formatter(entity[f.dataField], entity)\n                  : entity[f.dataField]\n              }\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default withDictionary('fieldNames', Details);\n\nfunction DetailsField({ name, value }) {\n  return (\n    <p className='my-0'>\n      <strong>{name}:</strong> {value}\n    </p>\n  );\n}\n","import { faSyncAlt } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport { IconButton } from '../sbadmin2';\nimport { Size, Variant } from '../sbadmin2/bootstrap';\n\nexport default function RefreshButton(props) {\n  return (\n    <IconButton\n      icon={faSyncAlt}\n      size={Size.sm}\n      variant={Variant.secondary}\n      type='button'\n      {...props}\n    />\n  );\n}\n","import classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { Size, Variant } from '../bootstrap';\n\nexport default function Spinner({ size, variant }) {\n  const classNames = classnames('spinner-border', {\n    [`spinner-border-${size}`]: size,\n    [`text-${variant}`]: variant,\n  });\n  return (\n    <div className={classNames} role='status'>\n      <span className='sr-only'>Loading...</span>\n    </div>\n  );\n}\n\nSpinner.propTypes = {\n  size: PropTypes.oneOf(Object.keys(Size)),\n  variant: PropTypes.oneOf(Object.keys(Variant)),\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Spinner from '../sbadmin2/utilities/Spinner';\n\nfunction ErrorMessageList({ errorMessage, subErrors }) {\n  return (\n    <>\n      {errorMessage}\n      <ul>\n        {subErrors.map((e, idx) => (\n          <li key={idx}>{e}</li>\n        ))}\n      </ul>\n    </>\n  );\n}\n\nErrorMessageList.propTypes = {\n  errorMessage: PropTypes.string.isRequired,\n  subErrors: PropTypes.arrayOf(PropTypes.string),\n};\n\nfunction ErrorMessage({ error }) {\n  const subErrors = error.networkError\n    ? error.networkError.result\n      ? error.networkError.result.errors\n      : [`${error.networkError}`]\n    : error.graphQLErrors.map(e => `${e.path.join('.')}: ${e.message}`);\n  console.error(error);\n  return (\n    <div className='text-danger'>\n      <i className='fas fa-fw fa-exclamation-triangle' />\n      <ErrorMessageList errorMessage={error.message} subErrors={subErrors} />\n    </div>\n  );\n}\n\nErrorMessage.propTypes = {\n  error: PropTypes.shape({\n    networkError: PropTypes.shape({\n      result: PropTypes.shape({\n        errors: PropTypes.array,\n      }),\n    }),\n    graphQLErrors: PropTypes.arrayOf(\n      PropTypes.shape({\n        path: PropTypes.arrayOf(PropTypes.string),\n        message: PropTypes.string,\n      })\n    ),\n    message: PropTypes.string,\n  }),\n};\n\nexport function WithQuery({ query, showError, children, ...props }) {\n  const { loading, error } = query;\n  return loading ? (\n    <Spinner {...props} />\n  ) : error ? (\n    showError && <ErrorMessage error={error} />\n  ) : (\n    children(query)\n  );\n}\n\nWithQuery.propTypes = {\n  children: PropTypes.func.isRequired,\n  query: PropTypes.shape({\n    loading: PropTypes.bool.isRequired,\n    error: PropTypes.any,\n  }),\n  showError: PropTypes.bool,\n};\n\nWithQuery.defaultProps = {\n  showError: true,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport RefreshButton from '../common/RefreshButton';\nimport { WithQuery } from '../gql/WithQuery';\nimport { TablePanel } from '../sbadmin2';\n\nexport function QueryTablePanel({ query, buttons, getData, ...props }) {\n  return (\n    <WithQuery query={query} size='sm' showError={false}>\n      {({ refetch, data }) => (\n        <TablePanel\n          headerButtons={\n            <>\n              <RefreshButton onClick={() => refetch()} className='mr-1' />\n              {buttons}\n            </>\n          }\n          data={getData(data)}\n          {...props}\n        />\n      )}\n    </WithQuery>\n  );\n}\n\nQueryTablePanel.propTypes = {\n  buttons: PropTypes.node,\n  getData: PropTypes.func.isRequired,\n  query: PropTypes.shape({\n    data: PropTypes.any,\n    refetch: PropTypes.func,\n  }).isRequired,\n};\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { QueryTablePanel } from '../gql/QueryTablePanel';\n\nexport function EntityList({\n  basePath,\n  createButton,\n  name,\n  columns,\n  renderActions,\n  ...props\n}) {\n  const history = useHistory();\n  const enhancedColumns = [\n    { dataField: 'name', sort: true },\n    ...columns,\n    {\n      dataField: 'actions',\n      isDummyColumn: true,\n      formatter: (_, row) => <span>{renderActions(row)}</span>,\n      style: {\n        whiteSpace: 'nowrap',\n        width: '1%',\n        paddingBottom: 0,\n      },\n    },\n  ];\n  function onSelect(entity) {\n    history.push(`${basePath}/${encodeURIComponent(entity.name)}`);\n  }\n  return (\n    <QueryTablePanel\n      {...props}\n      columns={enhancedColumns}\n      onSelect={onSelect}\n      buttons={createButton}\n      keyField='name'\n      defaultSorted={[\n        {\n          dataField: 'name',\n          order: 'asc',\n        },\n      ]}\n      selected={name}\n    />\n  );\n}\n","export default class Day {\n  constructor(year, month, day) {\n    this.year = year;\n    this.month = month;\n    this.day = day;\n  }\n\n  static fromDate(date) {\n    return new Date(date.getYear(), date.getMonth(), date.getDate());\n  }\n\n  format() {\n    return `${this.year}-${String(this.month).padStart(2, '0')}-${String(\n      this.day\n    ).padStart(2, '0')}`;\n  }\n}\n","import Day from './Day';\n\nconst monthNames = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\n\nexport default class Month {\n  constructor(year, month) {\n    this.year = year;\n    this.month = month;\n  }\n  static parse(string) {\n    const [year, month] = string.split('-');\n    return new Month(Number(year), Number(month));\n  }\n\n  firstDay() {\n    return new Day(this.year, this.month, 1);\n  }\n\n  lastDay() {\n    const date = new Date(this.year, this.month, 0);\n    return new Day(this.year, this.month, date.getDate());\n  }\n\n  pretty() {\n    return `${monthNames[this.month - 1]} ${this.year}`;\n  }\n}\n","import React, { createContext, useContext, useState } from 'react';\n\nexport const MonthContext = createContext();\nexport const useMonth = () => useContext(MonthContext);\n\nexport function MonthProvider({ currentMonth, children }) {\n  const [selectedMonth, setSelectedMonth] = useState(currentMonth);\n  const value = {\n    currentMonth,\n    selectedMonth,\n    setSelectedMonth,\n  };\n  return (\n    <MonthContext.Provider value={value}>{children}</MonthContext.Provider>\n  );\n}\n","import './ContextSwitcher.css';\n\nimport classNames from 'classnames';\nimport classnames from 'classnames';\nimport React, { forwardRef } from 'react';\nimport { Button, ButtonGroup, Dropdown, InputGroup } from 'react-bootstrap';\n\nexport default function ContextSwitcher({\n  className,\n  allowedValues,\n  onChange,\n  label,\n  value,\n  variant,\n  displayBg = 'light',\n  labelBg,\n  showLabel = true,\n  size,\n}) {\n  const labelClasses = classnames('border-0', { [`bg-${labelBg}`]: labelBg });\n\n  return (\n    <Dropdown\n      className={classNames(\n        'context-switcher',\n        'input-group',\n        'align-items-stretch',\n        className,\n        { [`input-group-${size}`]: size }\n      )}\n    >\n      {showLabel && (\n        <InputGroup.Prepend className='context-switcher__label d-flex align-items-stretch'>\n          <InputGroup.Text as='label' className={classnames(labelClasses)}>\n            {label}\n          </InputGroup.Text>\n        </InputGroup.Prepend>\n      )}\n\n      <Dropdown.Toggle as={Toggle} append={showLabel} size={size}>\n        {({ className, ...props }) => (\n          <>\n            <Dropdown.Menu>\n              {allowedValues.map(v => (\n                <Dropdown.Item onClick={() => onChange(v.id)} key={v.id}>\n                  {v.label}\n                </Dropdown.Item>\n              ))}\n            </Dropdown.Menu>\n            <InputGroup.Text\n              className={`bg-${displayBg} border-0 context_switcher__context-display text-dark`}\n              aria-label={label}\n            >\n              {value}\n            </InputGroup.Text>\n            <Button\n              variant={variant}\n              className={classNames(\n                'dropdown-toggle-split no-arrow ',\n                className\n              )}\n              {...props}\n            />\n          </>\n        )}\n      </Dropdown.Toggle>\n    </Dropdown>\n  );\n}\n\nconst Toggle = forwardRef(({ children, append, size, ...props }, ref) => {\n  return (\n    <ButtonGroup\n      className={classnames('context-switcher__toggle-group', {\n        'input-group-append': append,\n        [`btn-group-${size}`]: size,\n      })}\n      ref={ref}\n    >\n      {children(props)}\n    </ButtonGroup>\n  );\n});\n","import { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport React from 'react';\n\nimport Month from '../../model/Month';\nimport { useMonth } from '../context/Month';\nimport { useBudget } from '../gql/budget';\nimport { useDictionary } from '../sbadmin2';\nimport ContextSwitcher from '../sbadmin2/components/ContextSwitcher/ContextSwitcher';\nimport Spinner from '../sbadmin2/utilities/Spinner';\n\nconst GET_AVAILABLE_REPORTS = gql`\n  query availableReports($budgetID: ID!) {\n    availableReports(budgetID: $budgetID)\n  }\n`;\n\nexport default function MonthSwitcher(props) {\n  const { selectedBudget } = useBudget();\n  const { selectedMonth, setSelectedMonth } = useMonth();\n  const { months } = useDictionary();\n  const { loading, error, data } = useQuery(GET_AVAILABLE_REPORTS, {\n    variables: {\n      budgetID: selectedBudget.id,\n    },\n  });\n\n  let value;\n  let allowedValues = [];\n  if (loading) {\n    value = <Spinner size='sm' variant='secondary' />;\n  } else if (error) {\n    value = <i className='fas fa-fw fa-exclamation-triangle text-secondary' />;\n  } else {\n    allowedValues = data.availableReports\n      .sort()\n      .reverse()\n      .map(m => {\n        const parsed = Month.parse(m);\n        const label = `${months[parsed.month - 1]} ${parsed.year}`;\n        return { id: m, label };\n      });\n\n    const parsed = Month.parse(selectedMonth);\n    value = `${months[parsed.month - 1]} ${parsed.year}`;\n  }\n  return (\n    <ContextSwitcher\n      {...props}\n      value={value}\n      allowedValues={allowedValues}\n      onChange={month => setSelectedMonth(month)}\n      displayBg='white'\n      label='Month'\n      showLabel={false}\n      variant='secondary'\n      size='sm'\n    />\n  );\n}\n","import React from 'react';\nimport { Col, Row } from 'react-bootstrap';\n\nimport Details from '../common/Details';\nimport { EntityList } from '../common/EntityList';\nimport MonthSwitcher from '../common/MonthSwitcher';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Page } from '../sbadmin2';\n\nexport function DetailsPage(props) {\n  const {\n    query,\n    basePath,\n    title,\n    name,\n    renderActions,\n    getData,\n    getBreadcrumbPrefix = () => [],\n  } = props;\n  return (\n    <WithQuery query={query}>\n      {({ data }) => {\n        const entity = getData(data).find(e => e.name === name);\n        return (\n          <Page>\n            <Page.Header\n              title={name}\n              actions={renderActions(entity)}\n              breadcrumbs={getBreadcrumbPrefix(entity).concat([\n                { text: title, to: basePath },\n              ])}\n            >\n              <MonthSwitcher />\n            </Page.Header>\n            <Row>\n              <Col sm={3}>\n                <EntityList visibleColumns={['name']} {...props} />\n              </Col>\n              <Col>\n                <DetailsSection entity={entity} {...props} />\n              </Col>\n            </Row>\n          </Page>\n        );\n      }}\n    </WithQuery>\n  );\n}\n\nfunction DetailsSection({\n  entity,\n  columns,\n  readColumnNames,\n  detailsComponent: AdditionalDetails,\n  name,\n}) {\n  return (\n    <>\n      <Details\n        entity={entity}\n        columns={columns}\n        titleField='name'\n        readFieldNames={readColumnNames}\n      />\n      <AdditionalDetails name={name} entity={entity} />\n    </>\n  );\n}\n","import React from 'react';\n\nimport { EntityList } from '../common/EntityList';\nimport { Page } from '../sbadmin2';\n\nexport function ListPage({ ...props }) {\n  const { title } = props;\n  return (\n    <Page>\n      <Page.Header title={title} />\n      <EntityList {...props} />\n    </Page>\n  );\n}\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\nimport { DetailsPage } from '../layout/DetailsPage';\nimport { ListPage } from '../layout/ListPage';\nimport { withDictionary } from '../sbadmin2/language';\n\nfunction ListWithDetailsWorkflow({ ...props }) {\n  const { basePath } = props;\n\n  return (\n    <Switch>\n      <Route\n        path={`${basePath}/:name`}\n        render={({ match }) => (\n          <DetailsPage name={match.params.name} {...props} />\n        )}\n      />\n      <Route render={() => <ListPage {...props} />} />\n    </Switch>\n  );\n}\n\nexport default withDictionary('title', ListWithDetailsWorkflow);\n","import { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport { IconButton } from '../sbadmin2';\nimport { Size, Variant } from '../sbadmin2/bootstrap';\n\nexport default function CreateButton(props) {\n  return (\n    <IconButton\n      icon={faPlus}\n      size={Size.sm}\n      variant={Variant.primary}\n      type='button'\n      {...props}\n    />\n  );\n}\n","import React from 'react';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport PropTypes from 'prop-types';\n\nexport function InlineFormControl({ label, size, feedback, children }) {\n  return (\n    <Form.Group as={Row}>\n      <Form.Label column>{label}</Form.Label>\n      <Col sm={size}>\n        {children}\n        {feedback && (\n          <Form.Control.Feedback type=\"invalid\">\n            {feedback}\n          </Form.Control.Feedback>\n        )}\n      </Col>\n    </Form.Group>\n  );\n}\n\nInlineFormControl.propTypes = {\n  children: PropTypes.element,\n  feedback: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  size: PropTypes.number,\n};\n\nInlineFormControl.defaultProps = {\n  inline: 0,\n};\n","import { useState, useRef } from 'react';\n\nfunction simpleFormData({ $init, $process, $default }, getRoot) {\n  const process = $process || (v => v);\n  const formData = { current: null };\n  const _default =\n    typeof $default === 'function' ? () => $default(getRoot()) : () => $default;\n\n  formData.value = () => {\n    if (formData.current === null) {\n      return null;\n    }\n    return process(formData.current.value);\n  };\n\n  formData.changed = () => {\n    if (formData.current === null) {\n      return $init !== null;\n    }\n    return formData.current.value !== $init;\n  };\n\n  formData.default = () =>\n    $init !== null && $init !== undefined ? $init : _default();\n\n  formData.init = () => $init;\n\n  return formData;\n}\n\nfunction arrayFormData({ $model, $init }, rerender, getRoot) {\n  const formData = $init.map(v => createFormData($model(v), rerender), getRoot);\n  formData._originalPush = formData.push;\n\n  formData.value = () => {\n    return formData.map(v => v.value());\n  };\n\n  formData.changed = () => {\n    return formData.length !== $init.length || formData.some(v => v.changed());\n  };\n\n  formData.push = v => {\n    formData._originalPush(createFormData($model(v), rerender));\n    rerender();\n  };\n\n  formData.removeAt = idx => {\n    formData.splice(idx, 1);\n    rerender();\n  };\n\n  return formData;\n}\n\nfunction compositeFormData({ $includeAllValues, ...model }, rerender, getRoot) {\n  const formData = Object.keys(model).reduce(\n    (acc, key) => ({\n      ...acc,\n      [key]: createFormData(model[key], rerender, getRoot),\n    }),\n    {}\n  );\n\n  formData.changed = () => {\n    return Object.keys(model).some(k => formData[k].changed());\n  };\n\n  formData.value = () => {\n    return Object.keys(model).reduce((acc, key) => {\n      if (!formData[key].changed() && !$includeAllValues) {\n        return acc;\n      }\n      return { ...acc, [key]: formData[key].value() };\n    }, {});\n  };\n\n  return formData;\n}\n\nfunction createFormData(model, rerender, getRoot) {\n  if (Object.prototype.hasOwnProperty.call(model, '$init')) {\n    if (Object.prototype.hasOwnProperty.call(model, '$model')) {\n      return arrayFormData(model, rerender, getRoot);\n    }\n    return simpleFormData(model, getRoot);\n  }\n  return compositeFormData(model, rerender, getRoot);\n}\n\nexport function useFormData(model) {\n  const [, setValue] = useState(false);\n  const rerender = () => setValue(v => !v);\n  let formData,\n    getRoot = () => formData;\n  formData = createFormData(model, rerender, getRoot);\n  const ref = useRef(formData);\n  return ref.current;\n}\n","import gql from 'graphql-tag';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { useBudget } from './budget';\n\nconst GET_CATEGORIES = gql`\n  query GetCategories($budgetID: ID!) {\n    categories(budgetID: $budgetID) {\n      id\n      name\n      envelope {\n        id\n        name\n      }\n      description\n    }\n  }\n`;\n\nconst CREATE_CATEGORY = gql`\n  mutation CreateCategory($budgetID: ID!, $input: CategoryInput!) {\n    createCategory(budgetID: $budgetID, in: $input) {\n      id\n      name\n      envelope {\n        id\n        name\n      }\n      description\n    }\n  }\n`;\n\nconst UPDATE_CATEGORY = gql`\n  mutation UpdateCategory($budgetID: ID!, $id: ID!, $input: CategoryUpdate!) {\n    updateCategory(budgetID: $budgetID, id: $id, in: $input) {\n      id\n      name\n      envelope {\n        id\n        name\n      }\n      description\n    }\n  }\n`;\n\nexport function useCreateCategory() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(CREATE_CATEGORY, {\n    update: (cache, { data: { createCategory } }) => {\n      const { categories } = cache.readQuery({\n        query: GET_CATEGORIES,\n        variables: { budgetID: selectedBudget.id },\n      });\n      cache.writeQuery({\n        query: GET_CATEGORIES,\n        variables: { budgetID: selectedBudget.id },\n        data: {\n          categories: categories.concat([createCategory]),\n        },\n      });\n    },\n  });\n  const wrapper = input => {\n    mutation({ variables: { budgetID: selectedBudget.id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nexport function useUpdateCategory() {\n  const { selectedBudget } = useBudget();\n  const [mutation, ...rest] = useMutation(UPDATE_CATEGORY);\n  const wrapper = (id, input) => {\n    mutation({ variables: { budgetID: selectedBudget.id, id, input } });\n  };\n  return [wrapper, ...rest];\n}\n\nexport function useGetCategories() {\n  const { selectedBudget } = useBudget();\n  return useQuery(GET_CATEGORIES, {\n    variables: { budgetID: selectedBudget.id },\n  });\n}\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form } from 'react-bootstrap';\nimport Amount from '../../model/Amount';\n\nexport function AmountInput({ placeholder, formData }) {\n  const [isValid, setIsValid] = useState(false);\n  const [value, setValue] = useState(formData.default() || '');\n  useEffect(() => {\n    formData.current = { value };\n  }, [formData, value]);\n  function onChange(e) {\n    const newValue = e.target.value;\n    setValue(newValue);\n    setIsValid(Amount.isValid(newValue));\n  }\n  return (\n    <Form.Control\n      required\n      type=\"text\"\n      placeholder={placeholder}\n      value={value}\n      onChange={onChange}\n      isValid={isValid}\n    />\n  );\n}\n\nAmountInput.propTypes = {\n  formData: PropTypes.shape({\n    default: PropTypes.func.isRequired,\n    current: PropTypes.shape({ value: PropTypes.string }),\n  }),\n  placeholder: PropTypes.string,\n};\n","import { faMinus, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Col, Form, Row } from 'react-bootstrap';\n\nimport { useGetCategories } from '../gql/categories';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Combobox, IconButton, useDictionary } from '../sbadmin2';\nimport { Size, Variant } from '../sbadmin2/bootstrap';\nimport { AmountInput } from './AmountInput';\n\nexport function CategoriesInput({ formData }) {\n  const query = useGetCategories();\n  const { expenses } = useDictionary();\n  return (\n    <WithQuery query={query}>\n      {({ data }) => (\n        <>\n          <small className='d-flex align-items-center mb-3'>\n            {expenses.modal.labels.categories}\n            <IconButton\n              icon={faPlus}\n              variant={Variant.primary}\n              size={Size.sm}\n              onClick={() =>\n                formData.push({\n                  category: { id: null },\n                  amount: null,\n                })\n              }\n              type='button'\n              borderless\n            />\n          </small>\n          {formData.map((categoryFormData, idx) => (\n            <Form.Group\n              as={Row}\n              key={categoryFormData.categoryID.init() || idx}\n              className='d-flex align-items-center'\n            >\n              <Col sm={6}>\n                <Combobox\n                  _ref={categoryFormData.categoryID}\n                  defaultValue={categoryFormData.categoryID.init()}\n                  allowedValues={data.categories.map(({ id, name }) => ({\n                    id,\n                    label: name,\n                  }))}\n                  required\n                />\n              </Col>\n              <Col className='pr-0'>\n                <AmountInput\n                  placeholder={expenses.modal.labels.amount}\n                  formData={categoryFormData.amount}\n                />\n              </Col>\n              <Col sm={1} className='px-0'>\n                <IconButton\n                  icon={faMinus}\n                  variant={Variant.danger}\n                  size={Size.sm}\n                  onClick={() => formData.removeAt(idx)}\n                  type='button'\n                  borderless\n                />\n              </Col>\n            </Form.Group>\n          ))}\n        </>\n      )}\n    </WithQuery>\n  );\n}\n\nCategoriesInput.propTypes = {\n  formData: PropTypes.array.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Amount from '../../model/Amount';\nimport Month from '../../model/Month';\nimport { useGetAccounts } from '../gql/accounts';\nimport { useBudget } from '../gql/budget';\nimport { WithQuery } from '../gql/WithQuery';\nimport { useDictionary } from '../sbadmin2';\nimport { Combobox } from '../sbadmin2';\nimport { FormControl } from '../sbadmin2/utilities/FormControl';\nimport { FormInModal } from '../sbadmin2/utilities/FormInModal';\nimport { InlineFormControl } from '../sbadmin2/utilities/InlineFormControl';\nimport { useFormData } from '../sbadmin2/utilities/useFormData';\nimport { CategoriesInput } from './CategoriesInput';\n\nexport function ExpenseModal({ account, init, ...props }) {\n  const { selectedBudget } = useBudget();\n  const { expenses } = useDictionary();\n  const accountsQuery = useGetAccounts();\n  const formData = useFormData({\n    title: { $init: init.title },\n    date: { $init: init.date },\n    accountID: {\n      $init: init.account.id,\n      $default: account && account.id,\n    },\n    categories: {\n      $init: init.categories,\n      $model: c => ({\n        categoryID: { $init: c.category.id },\n        amount: {\n          $init: Amount.format(c.amount, false),\n          $process: Amount.parse,\n        },\n        $includeAllValues: true,\n      }),\n    },\n  });\n  const month = Month.parse(selectedBudget.currentMonth.month);\n  const first = month.firstDay();\n  const last = month.lastDay();\n\n  return (\n    <FormInModal formData={formData} {...props}>\n      <WithQuery query={accountsQuery}>\n        {({ data: accountsData }) => (\n          <>\n            <FormControl\n              label={expenses.modal.labels.title}\n              inline={10}\n              formData={formData.title}\n              feedback='Provide name'\n              required\n            />\n            <FormControl\n              label={expenses.modal.labels.date}\n              inline={10}\n              formData={formData.date}\n              feedback='Provide date'\n              type='date'\n              required\n              min={first.format()}\n              max={last.format()}\n            />\n            <InlineFormControl label={expenses.modal.labels.account} size={9}>\n              <Combobox\n                _ref={formData.accountID}\n                defaultValue={formData.accountID.default()}\n                allowedValues={accountsData.accounts.map(({ id, name }) => ({\n                  id,\n                  label: name,\n                }))}\n                disabled={!!account}\n                required\n              />\n            </InlineFormControl>\n            <CategoriesInput formData={formData.categories} />\n          </>\n        )}\n      </WithQuery>\n    </FormInModal>\n  );\n}\n\nExpenseModal.propTypes = {\n  account: PropTypes.shape({\n    id: PropTypes.string,\n  }),\n  init: PropTypes.shape({\n    id: PropTypes.string,\n    title: PropTypes.string,\n    date: PropTypes.string,\n    account: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n    categories: PropTypes.array,\n  }),\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport CreateButton from '../common/CreateButton';\nimport { useCreateExpense } from '../gql/expenses';\nimport { OpenModalButton } from '../sbadmin2';\nimport { useDictionary } from '../sbadmin2';\nimport { ExpenseModal } from './ExpenseModal';\n\nexport function CreateExpenseButton({ account }) {\n  const [createExpense] = useCreateExpense();\n  const { expenses } = useDictionary();\n\n  return (\n    <OpenModalButton\n      button={props => <CreateButton {...props} />}\n      modalContent={props => (\n        <ExpenseModal\n          init={{\n            name: null,\n            account: {},\n            date: null,\n            categories: [],\n          }}\n          account={account}\n          title={expenses.modal.createTitle}\n          onSave={createExpense}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nCreateExpenseButton.propTypes = {\n  account: PropTypes.any,\n};\n","import { faEdit, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport { IconButton, OpenModalButton } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\n\nexport default function ListAction({ disabled, variant, ...props }) {\n  return (\n    <IconButton\n      variant={disabled ? Variant.secondary : variant}\n      borderless\n      disabled={disabled}\n      {...props}\n    />\n  );\n}\n\nListAction.Edit = props => (\n  <ListAction icon={faEdit} variant={Variant.primary} {...props} />\n);\n\nListAction.EditInModal = ({\n  modalComponent: Modal,\n  dictionary,\n  update,\n  init,\n  ...buttonProps\n}) => (\n  <OpenModalButton\n    button={props => <ListAction.Edit {...buttonProps} {...props} />}\n    modalContent={props => (\n      <Modal\n        init={init}\n        title={dictionary.modal.editTitle}\n        onSave={input => update(init.id, input)}\n        {...props}\n      />\n    )}\n  />\n);\n\nListAction.Delete = props => (\n  <ListAction icon={faTrash} variant={Variant.danger} {...props} />\n);\n","import React from 'react';\n\nimport { useMonth } from '../context/Month';\nimport { useDictionary } from '../sbadmin2';\nimport ListAction from './ListAction';\n\nexport default function ListActions({\n  row,\n  monthScopedResource,\n  dictionaryName,\n  modalComponent,\n  updateHook,\n  deletehook,\n}) {\n  const { currentMonth, selectedMonth } = useMonth();\n  const dictionary = useDictionary()[dictionaryName];\n  const [updateMutation] = updateHook();\n  const [deleteMutation] = deletehook();\n  const disabled = monthScopedResource && currentMonth !== selectedMonth;\n  return (\n    <span>\n      <ListAction.EditInModal\n        modalComponent={modalComponent}\n        init={row}\n        update={updateMutation}\n        dictionary={dictionary}\n        disabled={disabled}\n      />\n      <ListAction.Delete\n        onClick={() => deleteMutation(row.id)}\n        disabled={disabled}\n      />\n    </span>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Amount from '../../model/Amount';\nimport ListActions from '../common/ListActions';\nimport { useMonth } from '../context/Month';\nimport {\n  useDeleteExpense,\n  useGetExpenses,\n  useUpdateExpense,\n} from '../gql/expenses';\nimport { QueryTablePanel } from '../gql/QueryTablePanel';\nimport { ExpenseModal } from './ExpenseModal';\n\nconst footer = {\n  totalAmount: amounts =>\n    Amount.prettyFormat(amounts.reduce((acc, a) => acc + a, 0)),\n};\n\nconst baseColumns = [\n  { dataField: 'title' },\n  { dataField: 'date', sort: true },\n  {\n    dataField: 'account',\n    formatter: a => <Link to={`/accounts/${a.name}`}>{a.name}</Link>,\n  },\n  {\n    dataField: 'totalAmount',\n    formatter: Amount.prettyFormat,\n    align: 'right',\n    headerAlign: 'right',\n    sort: true,\n    footerAlign: 'right',\n  },\n  {\n    dataField: 'actions',\n    isDummyColumn: true,\n    formatter: (_, row) => (\n      <ListActions\n        row={row}\n        monthScopedResource\n        modalComponent={ExpenseModal}\n        dictionaryName='expenses'\n        updateHook={useUpdateExpense}\n        deletehook={useDeleteExpense}\n      />\n    ),\n    style: {\n      whiteSpace: 'nowrap',\n      width: '1%',\n    },\n  },\n];\n\nconst rowClasses = (row, rowIndex) => {\n  return rowIndex % 2 === 0 && 'table-striped';\n};\n\nconst expandRow = {\n  className: 'background-color-white',\n  renderer: row => (\n    <table className='table table-sm mb-0'>\n      <tbody>\n        {row.categories.map((category, idx) => (\n          <tr key={idx}>\n            <td className='pl-3'>{category.category.name}</td>\n            <td>{Amount.prettyFormat(category.amount)}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  ),\n};\n\nconst defaultSorted = [\n  {\n    dataField: 'date',\n    order: 'desc',\n  },\n];\n\nexport function ExpensesTablePanel({\n  readTitle,\n  createButton,\n  accountFilter,\n  categoryFilter,\n  addFooter = false,\n  ...props\n}) {\n  const { selectedMonth } = useMonth();\n  const query = useGetExpenses(selectedMonth);\n\n  let filters = [];\n  let mappers = [];\n  if (accountFilter) {\n    filters.push(row => row.account.id === accountFilter);\n  }\n  if (categoryFilter) {\n    filters.push(row =>\n      row.categories.some(c => c.category.id === categoryFilter)\n    );\n    mappers.push(row => ({\n      ...row,\n      categories: row.categories.filter(c => c.category.id === categoryFilter),\n    }));\n    mappers.push(row => ({\n      ...row,\n      totalAmount: row.categories.reduce((acc, c) => acc + c.amount, 0),\n    }));\n  }\n\n  const columns = !addFooter\n    ? baseColumns\n    : baseColumns.map(c => ({\n        ...c,\n        footer: footer[c.dataField] ? footer[c.dataField] : '',\n      }));\n\n  return (\n    <QueryTablePanel\n      {...props}\n      query={query}\n      getData={d => d.monthlyReport.expenses}\n      buttons={createButton}\n      columns={columns}\n      keyField='id'\n      expandRow={expandRow}\n      rowClasses={rowClasses}\n      striped={false}\n      readTitle={readTitle}\n      readColumnNames={d => d.expenses.table.columns}\n      defaultSorted={defaultSorted}\n      filters={filters}\n      mappers={mappers}\n    />\n  );\n}\n","import './CollapsiblePanel.css';\n\nimport { faChevronDown, faChevronUp } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useState } from 'react';\nimport { Collapse } from 'react-bootstrap';\n\nimport Panel from '../Panel/Panel';\n\nconst CollapsibleContext = createContext();\n\nexport function CollapsiblePanel({ initialyShown, ...props }) {\n  const [show, setShow] = useState(initialyShown);\n  return (\n    <CollapsibleContext.Provider\n      value={{ show, toggle: () => setShow(s => !s) }}\n    >\n      <Panel {...props} />\n    </CollapsibleContext.Provider>\n  );\n}\n\nCollapsiblePanel.propTypes = {\n  initialyShown: PropTypes.bool,\n};\nCollapsiblePanel.defaultProps = {\n  initialyShown: false,\n};\n\nfunction CollapsiblePanelHeader({ className, ...props }) {\n  const { toggle } = useContext(CollapsibleContext);\n  const classNames = classnames('collapsible-panel__header', className);\n  return (\n    <Panel.Header onClick={() => toggle()} className={classNames} {...props} />\n  );\n}\nCollapsiblePanelHeader.propTypes = {\n  className: PropTypes.string,\n};\nCollapsiblePanel.Header = CollapsiblePanelHeader;\n\nfunction CollapsiblePanelTitle({ children, ...props }) {\n  const { show } = useContext(CollapsibleContext);\n  return (\n    <Panel.Title {...props}>\n      <span className='text-secondary mr-2'>\n        <FontAwesomeIcon icon={show ? faChevronUp : faChevronDown} />\n      </span>\n      {children}\n    </Panel.Title>\n  );\n}\nCollapsiblePanelTitle.propTypes = {\n  children: PropTypes.node,\n};\nCollapsiblePanel.Title = CollapsiblePanelTitle;\n\nfunction CollapsiblePanelBody(props) {\n  const { show } = useContext(CollapsibleContext);\n  return (\n    <Collapse in={show}>\n      <Panel.Body {...props} />\n    </Collapse>\n  );\n}\nCollapsiblePanel.Body = CollapsiblePanelBody;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Amount from '../../model/Amount';\nimport Month from '../../model/Month';\nimport { AmountInput } from '../Expenses/AmountInput';\nimport { useGetAccounts } from '../gql/accounts';\nimport { useBudget } from '../gql/budget';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Combobox, useDictionary } from '../sbadmin2';\nimport { FormControl } from '../sbadmin2/utilities/FormControl';\nimport { FormInModal } from '../sbadmin2/utilities/FormInModal';\nimport { InlineFormControl } from '../sbadmin2/utilities/InlineFormControl';\nimport { useFormData } from '../sbadmin2/utilities/useFormData';\n\nexport function TransferModal({ toAccount, fromAccount, init, ...props }) {\n  const { selectedBudget } = useBudget();\n  const { transfers } = useDictionary();\n  const query = useGetAccounts();\n  const formData = useFormData({\n    title: { $init: init.title },\n    date: { $init: init.date },\n    amount: {\n      $init: Amount.format(init.amount, false),\n      $process: Amount.parse,\n    },\n    fromAccountID: {\n      $init: init.fromAccount && init.fromAccount.id,\n      $process: v => (v === '' ? null : v),\n      $default: fromAccount && fromAccount.id,\n    },\n    toAccountID: {\n      $init: init.toAccount.id,\n      $default: toAccount && toAccount.id,\n    },\n  });\n\n  const month = Month.parse(selectedBudget.currentMonth.month);\n  const first = month.firstDay();\n  const last = month.lastDay();\n  return (\n    <FormInModal formData={formData} {...props}>\n      <WithQuery query={query}>\n        {({ data }) => (\n          <>\n            <FormControl\n              required\n              label={transfers.modal.labels.title}\n              inline={10}\n              formData={formData.title}\n              feedback='Provide title'\n            />\n            <FormControl\n              label={transfers.modal.labels.date}\n              inline={10}\n              formData={formData.date}\n              feedback='Provide date'\n              type='date'\n              required\n              min={first.format()}\n              max={last.format()}\n            />\n            <FormControl inline={10} label={transfers.modal.labels.amount}>\n              <AmountInput formData={formData.amount} />\n            </FormControl>{' '}\n            <InlineFormControl\n              size={10}\n              label={transfers.modal.labels.fromAccount}\n            >\n              <Combobox\n                allowedValues={data.accounts.map(({ id, name }) => ({\n                  id,\n                  label: name,\n                }))}\n                _ref={formData.fromAccountID}\n                defaultValue={formData.fromAccountID.default()}\n                disabled={!!fromAccount}\n              />\n            </InlineFormControl>\n            <InlineFormControl\n              size={10}\n              label={transfers.modal.labels.toAccount}\n            >\n              <Combobox\n                allowedValues={data.accounts.map(({ id, name }) => ({\n                  id,\n                  label: name,\n                }))}\n                _ref={formData.toAccountID}\n                defaultValue={formData.toAccountID.default()}\n                disabled={!!toAccount}\n              />\n            </InlineFormControl>\n          </>\n        )}\n      </WithQuery>\n    </FormInModal>\n  );\n}\n\nTransferModal.propTypes = {\n  fromAccount: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n  init: PropTypes.shape({\n    title: PropTypes.string,\n    date: PropTypes.string,\n    amount: PropTypes.number,\n    fromAccount: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    }),\n    toAccount: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n    }),\n  }),\n  toAccount: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport CreateButton from '../common/CreateButton';\nimport { useCreateTransfer } from '../gql/transfers';\nimport { OpenModalButton } from '../sbadmin2';\nimport { useDictionary } from '../sbadmin2';\nimport { TransferModal } from './TransferModal';\n\nexport function CreateTransferButton({ toAccount, fromAccount }) {\n  const [createTransfer] = useCreateTransfer();\n  const { transfers } = useDictionary();\n  return (\n    <OpenModalButton\n      button={props => <CreateButton {...props} />}\n      modalContent={props => (\n        <TransferModal\n          init={{\n            title: null,\n            fromAccount: { id: null },\n            toAccount: { id: null },\n            amount: null,\n            date: null,\n          }}\n          title={transfers.modal.createTitle}\n          onSave={createTransfer}\n          toAccount={toAccount}\n          fromAccount={fromAccount}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nCreateTransferButton.propTypes = {\n  fromAccount: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n  toAccount: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Amount from '../../model/Amount';\nimport ListActions from '../common/ListActions';\nimport { useMonth } from '../context/Month';\nimport { QueryTablePanel } from '../gql/QueryTablePanel';\nimport {\n  useDeleteTranfer,\n  useGetTransfers,\n  useUpdateTransfer,\n} from '../gql/transfers';\nimport { TransferModal } from './TransferModal';\n\nconst columns = [\n  { dataField: 'title' },\n  {\n    dataField: 'fromAccount',\n    formatter: a => a && <Link to={`/accounts/${a.name}`}>{a.name}</Link>,\n  },\n  {\n    dataField: 'toAccount',\n    formatter: a => a && <Link to={`/accounts/${a.name}`}>{a.name}</Link>,\n  },\n  {\n    dataField: 'amount',\n    align: 'right',\n    headerAlign: 'right',\n    formatter: Amount.prettyFormat,\n  },\n  {\n    dataField: 'date',\n    align: 'right',\n    headerAlign: 'right',\n  },\n  {\n    dataField: 'actions',\n    isDummyColumn: true,\n    formatter: (cell, row) => (\n      <ListActions\n        row={row}\n        monthScopedResource\n        modalComponent={TransferModal}\n        dictionaryName='transfers'\n        updateHook={useUpdateTransfer}\n        deletehook={useDeleteTranfer}\n      />\n    ),\n    style: {\n      whiteSpace: 'nowrap',\n      width: '1%',\n    },\n  },\n];\n\nexport function TransfersTablePanel({\n  toAccountFilter,\n  fromAccountFilter,\n  createButton,\n  ...props\n}) {\n  const { selectedMonth } = useMonth();\n  const query = useGetTransfers(selectedMonth);\n  let filters = [];\n  if (toAccountFilter) {\n    filters.push(row => row.toAccount.id === toAccountFilter);\n  }\n  if (fromAccountFilter) {\n    filters.push(\n      row => row.fromAccount && row.fromAccount.id === fromAccountFilter\n    );\n  }\n  return (\n    <QueryTablePanel\n      {...props}\n      query={query}\n      getData={data => data.monthlyReport.transfers}\n      buttons={createButton}\n      columns={columns}\n      keyField='id'\n      readColumnNames={d => d.transfers.table.columns}\n      filters={filters}\n    />\n  );\n}\n\nTransfersTablePanel.propTypes = {\n  createButton: PropTypes.node.isRequired,\n  fromAccountFilter: PropTypes.string,\n  toAccountFilter: PropTypes.string,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { CreateExpenseButton } from '../Expenses/CreateExpenseButton';\nimport { ExpensesTablePanel } from '../Expenses/ExpensesTablePanel';\nimport { CollapsiblePanel } from '../sbadmin2/components/CollapsiblePanel/CollapsiblePanel';\nimport { CreateTransferButton } from '../Transfers/CreateTransferButton';\nimport { TransfersTablePanel } from '../Transfers/TransfersTablePanel';\n\nexport function AccountDetails({ entity: account }) {\n  return (\n    <>\n      <TransfersTablePanel\n        readTitle={d => d.accounts.inTransfersTableTitle}\n        createButton={<CreateTransferButton toAccount={account} />}\n        accountFilter={account.id}\n        hiddenColumns={['toAccount']}\n        wrapper={CollapsiblePanel}\n        toAccountFilter={account.id}\n      />\n      <TransfersTablePanel\n        readTitle={d => d.accounts.outTransfersTableTitle}\n        createButton={<CreateTransferButton fromAccount={account} />}\n        accountFilter={account.id}\n        hiddenColumns={['fromAccount']}\n        wrapper={CollapsiblePanel}\n        fromAccountFilter={account.id}\n      />\n      <ExpensesTablePanel\n        readTitle={d => d.accounts.expensesTableTitle}\n        createButton={<CreateExpenseButton account={account} />}\n        accountFilter={account.id}\n        hiddenColumns={['account']}\n        wrapper={CollapsiblePanel}\n      />\n    </>\n  );\n}\n\nAccountDetails.propTypes = {\n  entity: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n  }),\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormControl, FormInModal, useDictionary } from '../sbadmin2';\nimport { useFormData } from '../sbadmin2/utilities/useFormData';\n\nexport function AccountModal({ init, ...props }) {\n  const { accounts } = useDictionary();\n  const formData = useFormData({\n    name: { $init: init.name },\n  });\n  return (\n    <FormInModal formData={formData} {...props}>\n      <FormControl\n        label={accounts.modal.labels.name}\n        inline={10}\n        formData={formData.name}\n        feedback=\"Provide name\"\n      />\n    </FormInModal>\n  );\n}\n\nAccountModal.propTypes = {\n  init: PropTypes.shape({ name: PropTypes.string }).isRequired,\n};\n","import React from 'react';\n\nimport CreateButton from '../common/CreateButton';\nimport { useCreateAccount } from '../gql/accounts';\nimport { OpenModalButton } from '../sbadmin2';\nimport { useDictionary } from '../sbadmin2';\nimport { AccountModal } from './AccountModal';\n\nexport function CreateAccountButton() {\n  const [createAccount] = useCreateAccount();\n  const { accounts } = useDictionary();\n  return (\n    <OpenModalButton\n      button={props => <CreateButton {...props} />}\n      modalContent={props => (\n        <AccountModal\n          init={{ name: '' }}\n          title={accounts.modal.createTitle}\n          onSave={createAccount}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n","import './UpdateAccountButton.css';\n\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useUpdateAccount } from '../gql/accounts';\nimport { IconButton, OpenModalButton, useDictionary } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { AccountModal } from './AccountModal';\n\nexport function UpdateAccountButton({ account }) {\n  const [updateAccount] = useUpdateAccount();\n  const { accounts } = useDictionary();\n  return (\n    <OpenModalButton\n      button={props => (\n        <IconButton\n          className='accounts__update-button'\n          icon={faEdit}\n          variant={Variant.primary}\n          borderless\n          {...props}\n        />\n      )}\n      modalContent={props => (\n        <AccountModal\n          init={account}\n          title={accounts.modal.editTitle}\n          onSave={input => updateAccount(account.id, input)}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nUpdateAccountButton.propTypes = {\n  account: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n  }),\n};\n","import { faArchive } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport Amount from '../../model/Amount';\nimport { useGetAccounts } from '../gql/accounts';\nimport { IconButton } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport ListWithDetailsWorkflow from '../workflow/ListWithDetailsWorkflow';\nimport { AccountDetails } from './AccountDetails';\nimport { CreateAccountButton } from './CreateAccountButton';\nimport { UpdateAccountButton } from './UpdateAccountButton';\n\nconst columns = [\n  {\n    dataField: 'balance',\n    align: 'right',\n    headerAlign: 'right',\n    formatter: Amount.prettyFormat,\n  },\n];\n\nexport default function AccountsPage() {\n  const query = useGetAccounts();\n\n  return (\n    <ListWithDetailsWorkflow\n      basePath='/accounts'\n      readTitle={d => d.sidebar.pages.accounts}\n      detailsComponent={AccountDetails}\n      query={query}\n      createButton={<CreateAccountButton />}\n      getData={data => data.accounts}\n      columns={columns}\n      readColumnNames={d => d.accounts.table.columns}\n      renderActions={account => (\n        <>\n          <UpdateAccountButton account={account} />\n          <IconButton icon={faArchive} variant={Variant.secondary} borderless />\n        </>\n      )}\n    />\n  );\n}\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\nimport { DetailsPage } from '../layout/DetailsPage';\nimport { withDictionary } from '../sbadmin2/language';\n\nfunction DetailsWorkflow({ ...props }) {\n  const { basePath } = props;\n  return (\n    <Switch>\n      <Route\n        path={`${basePath}/:name`}\n        render={({ match }) => (\n          <DetailsPage\n            name={decodeURIComponent(match.params.name)}\n            {...props}\n          />\n        )}\n      />\n    </Switch>\n  );\n}\n\nexport default withDictionary('title', DetailsWorkflow);\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useGetEnvelopes } from '../gql/envelopes';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Combobox } from '../sbadmin2';\nimport { useDictionary } from '../sbadmin2/language';\nimport { FormControl } from '../sbadmin2/utilities/FormControl';\nimport { FormInModal } from '../sbadmin2/utilities/FormInModal';\nimport { InlineFormControl } from '../sbadmin2/utilities/InlineFormControl';\nimport { useFormData } from '../sbadmin2/utilities/useFormData';\n\nexport function CategoryModal({ init, envelope, ...props }) {\n  const query = useGetEnvelopes();\n  const { categories } = useDictionary();\n  const formData = useFormData({\n    name: { $init: init.name },\n    envelopeID: {\n      $init: init.envelope.id,\n      $default: envelope && envelope.id,\n    },\n    description: { $init: init.description },\n  });\n  return (\n    <FormInModal formData={formData} {...props}>\n      <WithQuery query={query}>\n        {({ data }) => (\n          <>\n            <FormControl\n              label={categories.modal.labels.name}\n              inline={9}\n              formData={formData.name}\n              feedback='Provide name'\n            />\n            <InlineFormControl\n              size={9}\n              label={categories.modal.labels.envelope}\n            >\n              <Combobox\n                allowedValues={data.envelopes.map(({ id, name }) => ({\n                  id,\n                  label: name,\n                }))}\n                _ref={formData.envelopeID}\n                defaultValue={formData.envelopeID.default()}\n                disabled={!!envelope}\n                required\n              />\n            </InlineFormControl>\n            <FormControl\n              label={categories.modal.labels.description}\n              inline={9}\n              formData={formData.description}\n              feedback='Provide description'\n            />\n          </>\n        )}\n      </WithQuery>\n    </FormInModal>\n  );\n}\n\nCategoryModal.propTypes = {\n  envelope: PropTypes.shape({\n    id: PropTypes.string,\n  }),\n  id: PropTypes.string,\n  init: PropTypes.shape({\n    name: PropTypes.string,\n    envelope: PropTypes.shape({\n      id: PropTypes.string,\n    }).isRequired,\n    description: PropTypes.string,\n  }),\n  name: PropTypes.string,\n  onSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport CreateButton from '../common/CreateButton';\nimport { useCreateCategory } from '../gql/categories';\nimport { OpenModalButton } from '../sbadmin2';\nimport { useDictionary } from '../sbadmin2/language';\nimport { CategoryModal } from './CategoryModal';\n\nexport function CreateCategoryButton({ envelope, onClickRef }) {\n  const [createCategory] = useCreateCategory();\n  const { categories } = useDictionary();\n  return (\n    <OpenModalButton\n      onClickRef={onClickRef}\n      button={props => <CreateButton {...props} />}\n      modalContent={props => (\n        <CategoryModal\n          title={categories.modal.createTitle}\n          init={{ name: '', envelope: { id: null }, description: '' }}\n          onSave={createCategory}\n          envelope={envelope}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nCreateCategoryButton.propTypes = {\n  onClickRef: PropTypes.shape({ current: PropTypes.any }),\n};\n","import { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useUpdateCategory } from '../gql/categories';\nimport { IconButton, OpenModalButton, useDictionary } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { CategoryModal } from './CategoryModal';\n\nexport function UpdateCategoryButton({ category }) {\n  const [updateEnvelope] = useUpdateCategory();\n  const { categories } = useDictionary();\n  const onSave = input => {\n    updateEnvelope(category.id, input);\n  };\n  return (\n    <OpenModalButton\n      button={props => (\n        <IconButton\n          icon={faEdit}\n          variant={Variant.primary}\n          {...props}\n          borderless\n        />\n      )}\n      modalContent={props => (\n        <CategoryModal\n          title={categories.modal.editTitle}\n          init={category}\n          onSave={onSave}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nUpdateCategoryButton.propTypes = {\n  category: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n  }),\n};\n","import { faArchive } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useGetCategories } from '../gql/categories';\nimport { QueryTablePanel } from '../gql/QueryTablePanel';\nimport { IconButton } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { CreateCategoryButton } from './CreateCategoryButton';\nimport { UpdateCategoryButton } from './UpdateCategoryButton';\n\nexport const columns = [\n  {\n    dataField: 'envelope',\n    formatter: a => <Link to={`/envelopes/${a.name}`}>{a.name}</Link>,\n    sort: true,\n  },\n  { dataField: 'description' },\n];\n\nconst defaultSorted = [\n  {\n    dataField: 'name',\n    order: 'asc',\n  },\n];\n\nexport function CategoriesTablePanel({ envelopeFilter, ...props }) {\n  const query = useGetCategories();\n\n  let filters = [];\n  if (envelopeFilter) {\n    filters.push(row => row.envelope.id === envelopeFilter.id);\n  }\n\n  return (\n    <QueryTablePanel\n      {...props}\n      keyField='id'\n      columns={[\n        { dataField: 'name', sort: true },\n        ...columns,\n        {\n          dataField: 'actions',\n          isDummyColumn: true,\n          formatter: (cell, row) => (\n            <span>\n              <UpdateCategoryButton category={row} />\n              <IconButton\n                icon={faArchive}\n                variant={Variant.secondary}\n                borderless\n              />\n            </span>\n          ),\n          style: {\n            whiteSpace: 'nowrap',\n            width: '1%',\n          },\n        },\n      ]}\n      buttons={<CreateCategoryButton envelope={envelopeFilter} />}\n      query={query}\n      getData={data => data.categories}\n      readTitle={d => d.categories.table.title}\n      readColumnNames={d => d.categories.table.columns}\n      defaultSorted={defaultSorted}\n      filters={filters}\n    />\n  );\n}\n","import { faArchive } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\n\nimport { CreateExpenseButton } from '../Expenses/CreateExpenseButton';\nimport { ExpensesTablePanel } from '../Expenses/ExpensesTablePanel';\nimport { useGetCategories } from '../gql/categories';\nimport { IconButton } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { CollapsiblePanel } from '../sbadmin2/components/CollapsiblePanel/CollapsiblePanel';\nimport DetailsWorkflow from '../workflow/DetailsWorkflow';\nimport { columns } from './CategoriesTablePanel';\nimport { CreateCategoryButton } from './CreateCategoryButton';\nimport { UpdateCategoryButton } from './UpdateCategoryButton';\n\nexport default function CategoryPage() {\n  const query = useGetCategories();\n\n  return (\n    <DetailsWorkflow\n      basePath='/categories'\n      readTitle={d => d.categories.table.title}\n      getBreadcrumbPrefix={category => [\n        { to: '/envelopes', readText: d => d.sidebar.pages.envelopes },\n        {\n          to: `/envelopes/${category.envelope.name}`,\n          text: category.envelope.name,\n        },\n      ]}\n      query={query}\n      getData={d => d.categories}\n      renderActions={row => (\n        <span>\n          <UpdateCategoryButton category={row} />\n          <IconButton icon={faArchive} variant={Variant.secondary} borderless />\n        </span>\n      )}\n      columns={columns}\n      readColumnNames={d => d.categories.table.columns}\n      detailsComponent={CategoryDetails}\n      createButton={<CreateCategoryButton />}\n    />\n  );\n}\n\nfunction CategoryDetails(props) {\n  return (\n    <>\n      <CategoryExpenses {...props} />\n    </>\n  );\n}\n\nfunction CategoryExpenses({ entity }) {\n  return (\n    <ExpensesTablePanel\n      readTitle={d => d.expenses.table.title}\n      createButton={<CreateExpenseButton />}\n      wrapper={CollapsiblePanel}\n      categoryFilter={entity.id}\n      addFooter={true}\n    />\n  );\n}\n","import Amount from './Amount';\n\nexport default class Envelope {\n  static overLimit(envelope) {\n    return envelope.limit !== null && envelope.limit < envelope.balance\n      ? Amount.prettyFormat(envelope.balance - envelope.limit)\n      : '-';\n  }\n}\n","import PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { Form, Row } from 'react-bootstrap';\n\nimport { FormControl } from './FormControl';\n\nexport function OptionalFormControl({ initEnabled, label, inline, ...props }) {\n  const [enabled, setEnabled] = useState(initEnabled);\n  const toggleEnabled = () => setEnabled(v => !v);\n  return (\n    <Form.Group className='mb-3' as={!!inline && Row}>\n      <Form.Label column={!!inline}>\n        <Form.Check custom type='switch'>\n          <Form.Check.Input checked={enabled} onChange={toggleEnabled} />\n          <Form.Check.Label onClick={toggleEnabled}>{label}</Form.Check.Label>\n        </Form.Check>\n      </Form.Label>\n      {enabled && <FormControl.Input autoFocus inline={inline} {...props} />}\n    </Form.Group>\n  );\n}\n\nOptionalFormControl.propTypes = {\n  initEnabled: PropTypes.bool,\n  formData: PropTypes.shape({ current: PropTypes.any, init: PropTypes.any }),\n  feedback: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  inline: PropTypes.number,\n};\n\nOptionalFormControl.defaultProps = {\n  inline: 0,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Amount from '../../model/Amount';\nimport { AmountInput } from '../Expenses/AmountInput';\nimport { useGetEnvelopes } from '../gql/envelopes';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Combobox, useDictionary } from '../sbadmin2';\nimport { FormControl } from '../sbadmin2/utilities/FormControl';\nimport { FormInModal } from '../sbadmin2/utilities/FormInModal';\nimport { InlineFormControl } from '../sbadmin2/utilities/InlineFormControl';\nimport { OptionalFormControl } from '../sbadmin2/utilities/OptionalFormControl';\nimport { useFormData } from '../sbadmin2/utilities/useFormData';\n\nexport function PlanModal({ init, fromEnvelope, toEnvelope, ...props }) {\n  const query = useGetEnvelopes();\n  const { plans } = useDictionary();\n  const formData = useFormData({\n    title: { $init: init.title },\n    currentAmount: {\n      $init: Amount.format(init.currentAmount, false),\n      $process: Amount.parse,\n    },\n    recurringAmount: {\n      $init: Amount.format(init.recurringAmount, false),\n      $default: fd => Amount.format(fd.currentAmount.value()),\n      $process: Amount.parse,\n    },\n    fromEnvelopeID: {\n      $init: init.fromEnvelope !== null ? init.fromEnvelope.id : '',\n      $process: v => (v === '' ? null : v),\n      $default: fromEnvelope && fromEnvelope.id,\n    },\n    toEnvelopeID: {\n      $init: init.toEnvelope !== null ? init.toEnvelope.id : '',\n      $process: v => (v === '' ? null : v),\n      $default: toEnvelope && toEnvelope.id,\n    },\n  });\n  return (\n    <FormInModal formData={formData} {...props}>\n      <WithQuery query={query}>\n        {({ data }) => (\n          <>\n            <FormControl\n              required\n              label={plans.modal.labels.title}\n              inline={10}\n              formData={formData.title}\n              feedback='Provide title'\n            />\n            <FormControl inline={8} label={plans.modal.labels.amount}>\n              <AmountInput formData={formData.currentAmount} />\n            </FormControl>\n            <OptionalFormControl\n              initEnabled={init.recurringAmount !== null}\n              inline={8}\n              label={plans.modal.labels.recurring}\n            >\n              <AmountInput formData={formData.recurringAmount} required />\n            </OptionalFormControl>\n            <InlineFormControl size={8} label={plans.modal.labels.fromEnvelope}>\n              <Combobox\n                _ref={formData.fromEnvelopeID}\n                defaultValue={formData.fromEnvelopeID.default()}\n                allowedValues={data.envelopes\n                  .map(({ id, name }) => ({\n                    id,\n                    label: name,\n                  }))\n                  .concat([{ id: null, label: '' }])}\n                disabled={!!fromEnvelope}\n              />\n            </InlineFormControl>\n            <InlineFormControl size={8} label={plans.modal.labels.toEnvelope}>\n              <Combobox\n                _ref={formData.toEnvelopeID}\n                defaultValue={formData.toEnvelopeID.default()}\n                allowedValues={data.envelopes\n                  .map(({ id, name }) => ({\n                    id,\n                    label: name,\n                  }))\n                  .concat([{ id: null, label: '' }])}\n                disabled={!!toEnvelope}\n              />\n            </InlineFormControl>\n          </>\n        )}\n      </WithQuery>\n    </FormInModal>\n  );\n}\n\nPlanModal.propTypes = {\n  init: PropTypes.shape({\n    title: PropTypes.string,\n    currentAmount: PropTypes.number,\n    recurringAmount: PropTypes.number,\n    fromEnvelope: PropTypes.shape({ id: PropTypes.any.isRequired }),\n    toEnvelope: PropTypes.shape({ id: PropTypes.any.isRequired }),\n  }),\n};\n","import React from 'react';\n\nimport CreateButton from '../common/CreateButton';\nimport { useCreatePlan } from '../gql/plans';\nimport { OpenModalButton, useDictionary } from '../sbadmin2';\nimport { PlanModal } from './PlanModal';\n\nexport function CreatePlanButton(otherProps) {\n  const [createPlan] = useCreatePlan();\n  const { plans } = useDictionary();\n  return (\n    <OpenModalButton\n      button={props => <CreateButton {...props} />}\n      modalContent={props => (\n        <PlanModal\n          {...otherProps}\n          init={{\n            title: null,\n            fromEnvelope: { id: null },\n            toEnvelope: { id: null },\n            currentAmount: null,\n            recurringAmount: null,\n            date: null,\n          }}\n          title={plans.modal.createTitle}\n          onSave={createPlan}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n","import { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useDeletePlan } from '../gql/plans';\nimport { IconButton } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\n\nexport function DeletePlanButton({ plan }) {\n  const [deletePlan] = useDeletePlan();\n  return (\n    <IconButton\n      icon={faTrash}\n      variant={Variant.secondary}\n      onClick={() => deletePlan(plan.id)}\n      borderless\n    />\n  );\n}\n\nDeletePlanButton.propTypes = {\n  plan: PropTypes.shape({ id: PropTypes.any.isRequired }).isRequired,\n};\n","import { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useUpdatePlan } from '../gql/plans';\nimport { IconButton, OpenModalButton, useDictionary } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { PlanModal } from './PlanModal';\n\nexport function UpdatePlanButton({ plan }) {\n  const [updatePlan] = useUpdatePlan();\n  const { plans } = useDictionary();\n  return (\n    <OpenModalButton\n      button={props => (\n        <IconButton\n          icon={faEdit}\n          variant={Variant.primary}\n          borderless\n          {...props}\n        />\n      )}\n      modalContent={props => (\n        <PlanModal\n          init={plan}\n          title={plans.modal.editTitle}\n          onSave={input => updatePlan(plan.id, input)}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nUpdatePlanButton.propTypes = {\n  plan: PropTypes.shape({ id: PropTypes.any.isRequired }).isRequired,\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Amount from '../../model/Amount';\nimport { useGetCurrentPlans } from '../gql/plans';\nimport { QueryTablePanel } from '../gql/QueryTablePanel';\nimport { CreatePlanButton } from './CreatePlanButton';\nimport { DeletePlanButton } from './DeletePlanButton';\nimport { UpdatePlanButton } from './UpdatePlanButton';\n\nexport function PlansTablePanel({ fromEnvelope, toEnvelope, ...props }) {\n  const query = useGetCurrentPlans();\n\n  let filters = [];\n  if (fromEnvelope) {\n    filters.push(\n      row => row.fromEnvelope && row.fromEnvelope.id === fromEnvelope.id\n    );\n  }\n  if (toEnvelope) {\n    filters.push(row => row.toEnvelope && row.toEnvelope.id === toEnvelope.id);\n  }\n\n  return (\n    <QueryTablePanel\n      query={query}\n      getData={data => data.budget.currentMonth.plans}\n      buttons={\n        <CreatePlanButton fromEnvelope={fromEnvelope} toEnvelope={toEnvelope} />\n      }\n      columns={columns}\n      keyField='id'\n      readTitle={d => d.plans.table.title}\n      readColumnNames={d => d.plans.table.columns}\n      defaultSorted={defaultSorted}\n      filters={filters}\n      {...props}\n    />\n  );\n}\n\nconst columns = [\n  { dataField: 'title', sort: true },\n  {\n    dataField: 'fromEnvelope',\n    sort: true,\n    sortValue: cell => (cell ? cell.name : ''),\n    formatter: a => a && <Link to={`/envelopes/${a.name}`}>{a.name}</Link>,\n  },\n  {\n    dataField: 'toEnvelope',\n    sort: true,\n    sortValue: cell => (cell ? cell.name : ''),\n    formatter: a => a && <Link to={`/envelopes/${a.name}`}>{a.name}</Link>,\n  },\n  {\n    dataField: 'currentAmount',\n    formatter: Amount.prettyFormat,\n    align: 'right',\n    headerAlign: 'right',\n  },\n  {\n    dataField: 'recurringAmount',\n    formatter: a =>\n      a !== null ? <i className='fas fa-fw fa-sync-alt' /> : null,\n  },\n  {\n    dataField: 'actions',\n    isDummyColumn: true,\n    formatter: (_, row) => (\n      <span>\n        <UpdatePlanButton plan={row} />\n        <DeletePlanButton plan={row} />\n      </span>\n    ),\n    style: {\n      whiteSpace: 'nowrap',\n      width: '1%',\n    },\n  },\n];\n\nconst defaultSorted = [\n  {\n    dataField: 'title',\n    order: 'asc',\n  },\n];\n","import PropTypes from 'prop-types';\n\nexport const Amount = PropTypes.number;\n\nexport const Account = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n});\n\nexport const Expense = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  date: PropTypes.string,\n  totalBalance: Amount.isRequired,\n  location: PropTypes.string,\n  account: Account,\n});\n\nexport const Envelope = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n});\n\nexport const Category = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  envelope: Envelope,\n});\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Amount from '../../model/Amount';\nimport * as model from '../../model/propTypes';\nimport { AmountInput } from '../Expenses/AmountInput';\nimport { useDictionary } from '../sbadmin2/language';\nimport { FormControl } from '../sbadmin2/utilities/FormControl';\nimport { FormInModal } from '../sbadmin2/utilities/FormInModal';\nimport { OptionalFormControl } from '../sbadmin2/utilities/OptionalFormControl';\nimport { useFormData } from '../sbadmin2/utilities/useFormData';\n\nexport function EnvelopeModal({ init, ...props }) {\n  const { envelopes } = useDictionary();\n  const formData = useFormData({\n    name: { $init: init.name },\n    limit: {\n      $init: Amount.format(init.limit, false),\n      $process: Amount.parse,\n    },\n  });\n  return (\n    <FormInModal formData={formData} {...props}>\n      <FormControl\n        label={envelopes.modal.labels.name}\n        inline={9}\n        feedback='Provide a name for the envelope'\n        required\n        formData={formData.name}\n      />\n      <OptionalFormControl\n        initEnabled={!!init.limit}\n        inline={9}\n        label={envelopes.modal.labels.limit}\n      >\n        <AmountInput formData={formData.limit} required />\n      </OptionalFormControl>\n    </FormInModal>\n  );\n}\n\nEnvelopeModal.propTypes = {\n  init: PropTypes.shape({\n    name: PropTypes.string,\n    limit: model.Amount,\n  }).isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport CreateButton from '../common/CreateButton';\nimport { useCreateEnvelope } from '../gql/envelopes';\nimport { OpenModalButton } from '../sbadmin2';\nimport { useDictionary } from '../sbadmin2/language';\nimport { EnvelopeModal } from './EnvelopeModal';\n\nexport function CreateEnvelopeButton({ onClickRef }) {\n  const [createEnvelope] = useCreateEnvelope();\n  const { envelopes } = useDictionary();\n  return (\n    <OpenModalButton\n      onClickRef={onClickRef}\n      button={props => <CreateButton {...props} />}\n      modalContent={props => (\n        <EnvelopeModal\n          title={envelopes.modal.createTitle}\n          init={{ name: '', limit: null }}\n          onSave={createEnvelope}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nCreateEnvelopeButton.propTypes = {\n  onClickRef: PropTypes.shape({ current: PropTypes.any }),\n};\n","import { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useUpdateEnvelope } from '../gql/envelopes';\nimport { IconButton, OpenModalButton, useDictionary } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { EnvelopeModal } from './EnvelopeModal';\n\nexport function UpdateEnvelopeButton({ envelope }) {\n  const [updateEnvelope] = useUpdateEnvelope();\n  const { envelopes } = useDictionary();\n\n  const onSave = input => {\n    updateEnvelope(envelope.id, input);\n  };\n  return (\n    <OpenModalButton\n      button={props => (\n        <IconButton\n          icon={faEdit}\n          variant={Variant.primary}\n          borderless\n          {...props}\n        />\n      )}\n      modalContent={props => (\n        <EnvelopeModal\n          title={envelopes.modal.editTitle}\n          init={envelope}\n          onSave={onSave}\n          {...props}\n        />\n      )}\n    />\n  );\n}\n\nUpdateEnvelopeButton.propTypes = {\n  envelope: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n  }),\n};\n","import { faArchive } from '@fortawesome/free-solid-svg-icons';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Amount from '../../model/Amount';\nimport Envelope from '../../model/Envelope';\nimport { CategoriesTablePanel } from '../Categories/CategoriesTablePanel';\nimport { useGetEnvelopes } from '../gql/envelopes';\nimport { PlansTablePanel } from '../Plans/PlansTablePanel';\nimport { IconButton } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\nimport { CollapsiblePanel } from '../sbadmin2/components/CollapsiblePanel/CollapsiblePanel';\nimport ListWithDetailsWorkflow from '../workflow/ListWithDetailsWorkflow';\nimport { CreateEnvelopeButton } from './CreateEnvelopeButton';\nimport { UpdateEnvelopeButton } from './UpdateEnvelopeButton';\n\nconst columns = [\n  {\n    dataField: 'balance',\n    formatter: Amount.prettyFormat,\n    align: 'right',\n    headerAlign: 'right',\n  },\n  {\n    dataField: 'limit',\n    formatter: Amount.prettyFormat,\n    align: 'right',\n    headerAlign: 'right',\n  },\n  {\n    dataField: 'overLimit',\n    align: 'right',\n    headerAlign: 'right',\n    formatter: (_, row) => Envelope.overLimit(row),\n  },\n];\n\nexport default function EnvelopesPage() {\n  const query = useGetEnvelopes();\n\n  return (\n    <ListWithDetailsWorkflow\n      basePath='/envelopes'\n      readTitle={d => d.sidebar.pages.envelopes}\n      detailsComponent={EnvelopeDetails}\n      query={query}\n      createButton={<CreateEnvelopeButton />}\n      getData={data => data.envelopes}\n      columns={columns}\n      readColumnNames={d => d.envelopes.table.columns}\n      renderActions={envelope => (\n        <>\n          <UpdateEnvelopeButton envelope={envelope} />\n          <IconButton icon={faArchive} variant={Variant.secondary} borderless />\n        </>\n      )}\n    />\n  );\n}\n\nexport function EnvelopeDetails({ entity }) {\n  const history = useHistory();\n\n  function handleCategoryOnSelect(category) {\n    history.push(`/categories/${encodeURIComponent(category.name)}`);\n  }\n\n  return (\n    <>\n      <CategoriesTablePanel\n        hiddenColumns={['envelope']}\n        envelopeFilter={entity}\n        wrapper={CollapsiblePanel}\n        onSelect={handleCategoryOnSelect}\n      />\n      <PlansTablePanel\n        hiddenColumns={['toEnvelope']}\n        toEnvelope={entity}\n        wrapper={CollapsiblePanel}\n        readTitle={d => d.envelopes.inPlansTableTitle}\n      />\n      <PlansTablePanel\n        hiddenColumns={['fromEnvelope']}\n        fromEnvelope={entity}\n        wrapper={CollapsiblePanel}\n        readTitle={d => d.envelopes.outPlansTableTitle}\n      />\n    </>\n  );\n}\n","import React from 'react';\n\nimport MonthSwitcher from '../common/MonthSwitcher';\nimport { Page } from '../sbadmin2';\nimport { CreateExpenseButton } from './CreateExpenseButton';\nimport { ExpensesTablePanel } from './ExpensesTablePanel';\n\nexport default function ExpensesPage() {\n  return (\n    <Page>\n      <Page.Header readTitle={d => d.sidebar.pages.expenses}>\n        <MonthSwitcher />\n      </Page.Header>\n      <ExpensesTablePanel\n        readTitle={d => d.expenses.table.title}\n        createButton={<CreateExpenseButton />}\n      />\n    </Page>\n  );\n}\n","import { faClipboardCheck } from '@fortawesome/free-solid-svg-icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useCloseCurrentMonth } from '../gql/budget';\nimport { SplitButton, useDictionary } from '../sbadmin2';\nimport { Variant } from '../sbadmin2/bootstrap';\n\nexport function StartNextMonthButton({ disabled, warn }) {\n  const [closeCurrentMonth] = useCloseCurrentMonth();\n  const { dashboard } = useDictionary();\n  return (\n    <SplitButton\n      icon={faClipboardCheck}\n      variant={\n        disabled ? Variant.secondary : warn ? Variant.warning : Variant.success\n      }\n      disabled={disabled}\n      onClick={() => closeCurrentMonth()}\n    >\n      {dashboard.buttons.closeMonth}\n    </SplitButton>\n  );\n}\n\nStartNextMonthButton.propTypes = {\n  disabled: PropTypes.bool,\n  warn: PropTypes.bool,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Month from '../../model/Month';\nimport { Panel, useDictionary } from '../sbadmin2';\nimport { StartNextMonthButton } from './StartNextMonthButton';\n\nexport function CurrentMonth({ className, month }) {\n  const { dashboard, months } = useDictionary();\n  const parsed = Month.parse(month.month);\n  return (\n    <Panel className={className}>\n      <Panel.Header>\n        <div className='d-flex justify-content-between align-items-center'>\n          <Panel.Title\n            title={\n              <span>\n                {dashboard.currentMonth}:{' '}\n                <strong>\n                  <em>\n                    {months[parsed.month - 1]} {parsed.year}\n                  </em>\n                </strong>\n              </span>\n            }\n          />\n          <div>\n            <StartNextMonthButton\n              disabled={month.problems.some(p => p.severity === 'ERROR')}\n              warn={month.problems.length > 0}\n            />\n          </div>\n        </div>\n      </Panel.Header>\n    </Panel>\n  );\n}\n\nCurrentMonth.propTypes = {\n  className: PropTypes.string,\n  month: PropTypes.shape({\n    month: PropTypes.string.isRequired,\n    problems: PropTypes.arrayOf(\n      PropTypes.shape({ severity: PropTypes.string.isRequired })\n    ).isRequired,\n  }),\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { Variant } from './bootstrap';\n\nexport function Gauge({ className, variant, title, value, faIcon }) {\n  return (\n    <div className={className}>\n      <div className={`card border-left-${variant} shadow h-100 py-2`}>\n        <div className='card-body'>\n          <div className='row no-gutters align-items-center'>\n            <div className='col mr-2'>\n              <div\n                className={`text-xs font-weight-bold text-${variant} text-uppercase mb-1`}\n              >\n                {title}\n              </div>\n              <div className='h5 mb-0 font-weight-bold text-gray-800'>\n                {value}\n              </div>\n            </div>\n            <div className='col-auto'>\n              <i className={`fas fa-${faIcon} fa-2x text-gray-300`} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nGauge.propTypes = {\n  className: PropTypes.string.isRequired,\n  faIcon: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  variant: PropTypes.PropTypes.oneOf(Object.keys(Variant)),\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Row } from 'react-bootstrap';\n\nimport Amount from '../../model/Amount';\nimport { useDictionary } from '../sbadmin2';\nimport { Gauge } from '../sbadmin2/Gauge';\n\nexport function Gauges({ className, month }) {\n  const { dashboard } = useDictionary();\n  return (\n    <div className={className}>\n      <Row>\n        <Gauge\n          className='col-6 col-lg-12 mb-4'\n          variant='primary'\n          title={dashboard.planned}\n          value={Amount.prettyFormat(month.totalPlannedAmount)}\n          faIcon='clipboard-list'\n        />\n        <Gauge\n          className='col-6 col-lg-12 mb-4'\n          variant='primary'\n          title={dashboard.incomes}\n          value={Amount.prettyFormat(month.totalIncomeAmount)}\n          faIcon='briefcase'\n        />\n        <Gauge\n          className='col-6 col-lg-12 mb-4'\n          variant='primary'\n          title={dashboard.leftToPlan}\n          value={Amount.prettyFormat(\n            month.totalIncomeAmount - month.totalPlannedAmount\n          )}\n          faIcon='balance-scale'\n        />\n        <Gauge\n          className='col-6 col-lg-12 mb-4'\n          variant='primary'\n          title={dashboard.expenses}\n          value={Amount.prettyFormat(month.totalExpenseAmount)}\n          faIcon='receipt'\n        />\n      </Row>\n    </div>\n  );\n}\n\nGauges.propTypes = {\n  className: PropTypes.string,\n  month: PropTypes.shape({\n    totalPlannedAmount: PropTypes.number,\n    totalIncomeAmount: PropTypes.number,\n    totalExpenseAmount: PropTypes.number,\n  }),\n};\n","import './MonthProblems.css';\n\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { useGetAccounts } from '../gql/accounts';\nimport { useGetEnvelopes } from '../gql/envelopes';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Panel, useDictionary } from '../sbadmin2';\n\nconst severityVariant = {\n  ERROR: 'danger',\n  WARNING: 'warning',\n  INFO: 'primary',\n};\n\nconst severityIcon = {\n  ERROR: 'exclamation-circle',\n  WARNING: 'exclamation-triangle',\n  INFO: 'info-circle',\n};\n\nconst basePathPerProblem = {\n  NegativeBalanceOnEnvelope: '/envelopes',\n  EnvelopeOverLimit: '/envelopes',\n  NegativeBalanceOnAccount: '/accounts',\n};\n\nexport function MonthProblems({ className, problems }) {\n  const envelopesQuery = useGetEnvelopes();\n  const accountsQuery = useGetAccounts();\n  return (\n    <WithQuery query={envelopesQuery}>\n      {({ data: envelopesData }) => (\n        <WithQuery query={accountsQuery}>\n          {({ data: accountsData }) => (\n            <Panel className={className}>\n              <Panel.Header>\n                <div className='d-flex justify-content-between align-items-center'>\n                  <Panel.Title readTitle={d => d.dashboard.problems.title} />\n                </div>\n              </Panel.Header>\n              <Panel.Body>\n                <ul className='list-group list-group-flush'>\n                  {problems.length > 0 ? (\n                    problems.map((problem, idx) => (\n                      <Problem\n                        key={idx}\n                        problem={problem}\n                        envelopes={envelopesData.envelopes}\n                        accounts={accountsData.accounts}\n                      />\n                    ))\n                  ) : (\n                    <NoProblems />\n                  )}\n                </ul>\n              </Panel.Body>\n            </Panel>\n          )}\n        </WithQuery>\n      )}\n    </WithQuery>\n  );\n}\n\nMonthProblems.propTypes = {\n  className: PropTypes.string,\n  problems: PropTypes.array.isRequired,\n};\n\nfunction NoProblems() {\n  const { dashboard } = useDictionary();\n  return (\n    <li className='list-group-item text-success'>\n      <i className='fas fa-fw fa-check-circle mr-1' />\n      {dashboard.noProblems}\n    </li>\n  );\n}\n\nfunction Problem(props) {\n  const { problem, accounts, envelopes } = props;\n  const history = useHistory();\n  const basePath = basePathPerProblem[problem.__typename];\n  const classes = classNames(\n    { 'month-dashboard__problem--clickable': !!basePath },\n    'list-group-item',\n    `text-${severityVariant[problem.severity]}`\n  );\n\n  function onClick() {\n    if (!basePath) return;\n    const list = basePath === '/envelopes' ? envelopes : accounts;\n    const entityName = list.find(e => e.id === problem.id).name;\n    history.push(`${basePath}/${entityName}`);\n  }\n\n  return (\n    <li className={classes} onClick={onClick}>\n      <i className={`fas fa-fw fa-${severityIcon[problem.severity]} mr-1`} />\n      <ProblemMessage {...props} />\n    </li>\n  );\n}\n\nProblem.propTypes = {\n  problem: PropTypes.shape({\n    severity: PropTypes.oneOf(Object.keys(severityVariant)),\n  }),\n};\n\nfunction ProblemMessage({ problem, envelopes, accounts }) {\n  const { dashboard } = useDictionary();\n  const { problems } = dashboard;\n\n  return (\n    <span>\n      {problem.__typename === 'Misplanned'\n        ? problem.overplanned\n          ? problems.overplanned\n          : problems.underplanned\n        : problem.__typename === 'NegativeBalanceOnEnvelope'\n        ? problems.expensesExceedPlans(\n            envelopes.find(e => e.id === problem.id).name\n          )\n        : problem.__typename === 'EnvelopeOverLimit'\n        ? problems.envelopeOverLimit(\n            envelopes.find(e => e.id === problem.id).name\n          )\n        : problem.__typename === 'NegativeBalanceOnAccount'\n        ? problems.negativeAccountBalance(\n            accounts.find(a => a.id === problem.id).name\n          )\n        : problem.__typename === 'MonthStillInProgress'\n        ? problems.monthNotEnded\n        : problem.__typename}\n    </span>\n  );\n}\n\nProblemMessage.propTypes = {\n  problem: PropTypes.shape({\n    __typename: PropTypes.string.isRequired,\n    id: PropTypes.any,\n    overplanned: PropTypes.bool,\n  }),\n};\n","import React from 'react';\nimport { Row } from 'react-bootstrap';\n\nimport { useMonth } from '../context/Month';\nimport { useGetMonthlyReport } from '../gql/monthlyReport';\nimport { WithQuery } from '../gql/WithQuery';\nimport { Page } from '../sbadmin2';\nimport { CurrentMonth } from './CurrentMonth';\nimport { Gauges } from './Gauges';\nimport { MonthProblems } from './MonthProblems';\n\nexport function MonthDashboardPage() {\n  const { currentMonth } = useMonth();\n  const query = useGetMonthlyReport(currentMonth);\n  return (\n    <Page>\n      <WithQuery query={query}>\n        {({ data }) => (\n          <Row>\n            <CurrentMonth\n              className='col-12 d-lg-none px-0'\n              month={data.monthlyReport}\n            />\n            <Gauges className='col-12 col-lg-3' month={data.monthlyReport} />\n            <MonthProblems\n              className='col-12 d-lg-none px-0'\n              problems={data.monthlyReport.problems}\n            />\n            <Row className='col-12 col-lg-9 flex-lg-column'>\n              <CurrentMonth\n                className='d-none d-lg-block'\n                month={data.monthlyReport}\n              />\n              <MonthProblems\n                className='d-none d-lg-block flex-grow-1'\n                problems={data.monthlyReport.problems}\n              />\n            </Row>\n          </Row>\n        )}\n      </WithQuery>\n    </Page>\n  );\n}\n","import React from 'react';\n\nimport { Page } from '../sbadmin2';\nimport { PlansTablePanel } from './PlansTablePanel';\n\nexport default function PlansPage() {\n  return (\n    <Page>\n      <Page.Header readTitle={d => d.sidebar.pages.plans} />\n      <PlansTablePanel />\n    </Page>\n  );\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction TopbarContextExpanded({ renderContext }) {\n  return (\n    <form className='d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-context'>\n      {renderContext()}\n    </form>\n  );\n}\n\nTopbarContextExpanded.propTypes = {\n  renderContext: PropTypes.func.isRequired,\n};\n\nfunction TopbarContextMinimized({ faIcon, renderContext }) {\n  return (\n    <li className='nav-item dropdown no-arrow d-sm-none'>\n      <span\n        className='nav-link dropdown-toggle'\n        id='contextDropdown'\n        role='button'\n        data-toggle='dropdown'\n        aria-haspopup='true'\n        aria-expanded='false'\n        style={{ cursor: 'pointer' }}\n      >\n        <i className={`fas fa-${faIcon} fa-fw`}></i>\n      </span>\n      <div\n        className='dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in'\n        aria-labelledby='contextDropdown'\n      >\n        <form className='form-inline mr-auto w-100 navbar-context'>\n          {renderContext()}\n        </form>\n      </div>\n    </li>\n  );\n}\n\nTopbarContextMinimized.propTypes = {\n  faIcon: PropTypes.string.isRequired,\n  renderContext: PropTypes.func.isRequired,\n};\n\nexport default function TopbarContext({ minified, ...props }) {\n  return minified ? (\n    <TopbarContextMinimized {...props} />\n  ) : (\n    <TopbarContextExpanded {...props} />\n  );\n}\n\nTopbarContext.propTypes = {\n  minified: PropTypes.bool,\n};\n","import './Topbar.css';\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { useSBAdmin2 } from '../context';\nimport TopbarContext from './TopbarContext';\n\nexport default function Topbar({\n  renderMenus,\n  renderContext,\n  renderUser,\n  faIconContextMinified,\n}) {\n  const { toggleSidebar } = useSBAdmin2();\n\n  return (\n    <nav className='navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow'>\n      <button\n        onClick={toggleSidebar}\n        className='btn btn-link d-md-none rounded-circle mr-3'\n      >\n        <i className='fa fa-bars'></i>\n      </button>\n\n      <TopbarContext minified={false} renderContext={renderContext} />\n\n      <ul className='navbar-nav ml-auto'>\n        <TopbarContext\n          minified={true}\n          renderContext={renderContext}\n          faIcon={faIconContextMinified}\n        />\n\n        {renderMenus()}\n\n        <div className='topbar-divider d-none d-sm-block' />\n\n        {renderUser()}\n      </ul>\n    </nav>\n  );\n}\n\nTopbar.propTypes = {\n  faIconContextMinified: PropTypes.string.isRequired,\n  renderContext: PropTypes.func.isRequired,\n  renderMenus: PropTypes.func.isRequired,\n  renderUser: PropTypes.func.isRequired,\n};\n","import classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction TopbarMenuCounter({ counter }) {\n  const badge = counter >= 3 ? '3+' : '' + counter;\n  return (\n    counter > 0 && (\n      <span className='badge badge-danger badge-counter'>{badge}</span>\n    )\n  );\n}\n\nexport function TopbarMenu({ name, faIcon, children, counter }) {\n  const iconClasses = classnames('fas', 'fa-fw', `fa-${faIcon}`);\n  const id = `topbar--${name || faIcon}`;\n  return (\n    <li className='nav-item dropdown no-arrow mx-1'>\n      <span\n        className='nav-link dropdown-toggle'\n        id={id}\n        role='button'\n        data-toggle='dropdown'\n        aria-haspopup='true'\n        aria-expanded='false'\n        style={{ cursor: 'pointer' }}\n      >\n        <i className={iconClasses} />\n        <TopbarMenuCounter counter={counter} />\n      </span>\n      <div\n        className='dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in'\n        aria-labelledby={id}\n      >\n        <h6 className='dropdown-header'>{name}</h6>\n        {children}\n        <span\n          className='dropdown-item text-center small text-gray-500'\n          style={{ cursor: 'pointer' }}\n        >\n          Show All\n        </span>\n      </div>\n    </li>\n  );\n}\n\nTopbarMenu.propTypes = {\n  children: PropTypes.node,\n  counter: PropTypes.number.isRequired,\n  entries: PropTypes.arrayOf(\n    PropTypes.shape({\n      highlighted: PropTypes.bool,\n      render: PropTypes.func.isRequired,\n    })\n  ),\n  faIcon: PropTypes.string,\n  highlighted: PropTypes.bool,\n  name: PropTypes.string,\n};\n","import React from 'react';\nimport { useSBAdmin2 } from '../context';\n\nexport default function TopbarUser() {\n  const { user, logout } = useSBAdmin2();\n  return (\n    <li className=\"nav-item dropdown no-arrow\">\n      <span\n        className=\"nav-link dropdown-toggle\"\n        id=\"userDropdown\"\n        role=\"button\"\n        data-toggle=\"dropdown\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n      >\n        <span className=\"mr-2 d-none d-lg-inline text-gray-600 small\">\n          {user.name}\n        </span>\n        <img alt=\"\" className=\"img-profile rounded-circle\" src={user.picture} />\n      </span>\n      <ul\n        className=\"dropdown-menu dropdown-menu-right shadow animated--grow-in\"\n        aria-labelledby=\"userDropdown\"\n      >\n        <li className=\"dropdown-item\">\n          <i className=\"fas fa-cogs fa-sm fa-fw mr-2 text-gray-400\"></i>\n          Settings\n        </li>\n        <div className=\"dropdown-divider\"></div>\n        <li\n          className=\"dropdown-item\"\n          data-toggle=\"modal\"\n          data-target=\"#logoutModal\"\n          onClick={() => logout()}\n        >\n          <i className=\"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400\"></i>\n          Logout\n        </li>\n      </ul>\n    </li>\n  );\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport ContextSwitcher from '../components/ContextSwitcher/ContextSwitcher';\n\nexport default function TopbarContextSwitcher({\n  label,\n  value,\n  onChange,\n  allowedValues,\n}) {\n  return (\n    <ContextSwitcher\n      label={label}\n      allowedValues={allowedValues}\n      value={value}\n      onChange={onChange}\n    />\n  );\n}\n\nTopbarContextSwitcher.propTypes = {\n  allowedValues: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n    })\n  ),\n  label: PropTypes.any,\n  onChange: PropTypes.any,\n  value: PropTypes.any,\n};\n","import React from 'react';\n\nimport { useBudget } from './gql/budget';\nimport { useDictionary } from './sbadmin2';\nimport TopbarContextSwitcher from './sbadmin2/Topbar/TopbarContextSwitcher';\nimport Spinner from './sbadmin2/utilities/Spinner';\n\nexport default function TopbarBudgetSwitcher() {\n  const {\n    selectedBudget,\n    setSelectedBudget,\n    budgets,\n    loading,\n    error,\n  } = useBudget();\n  const { topbar } = useDictionary();\n  const value = loading ? (\n    <Spinner size='sm' variant='secondary' />\n  ) : error ? (\n    <i className='fas fa-fw fa-exclamation-triangle text-secondary' />\n  ) : (\n    selectedBudget && selectedBudget.name\n  );\n  const onChange = id => {\n    const budget = budgets.find(b => b.id === id);\n    setSelectedBudget(budget);\n  };\n  return (\n    <TopbarContextSwitcher\n      label={topbar.budgetLabel}\n      value={value}\n      onChange={onChange}\n      allowedValues={budgets.map(b => ({ id: b.id, label: b.name }))}\n    />\n  );\n}\n","import React from 'react';\nimport TemplateTopbar from './sbadmin2/Topbar/Topbar';\nimport { TopbarMenu } from './sbadmin2/Topbar/TopbarMenu';\nimport TopbarUser from './sbadmin2/Topbar/TopbarUser';\nimport TopbarBudgetSwitcher from './TopbarBudgetSwitcher';\nimport { useAuth0 } from '../react-auth0-spa';\nimport { useDictionary } from './sbadmin2/language';\n\nexport default function Topbar() {\n  const { user, logout } = useAuth0();\n  const { topbar } = useDictionary();\n  return (\n    <TemplateTopbar\n      faIconContextMinified=\"search\"\n      renderContext={() => <TopbarBudgetSwitcher />}\n      renderUser={() => (\n        <TopbarUser\n          name={user.name}\n          pictureUrl={user.picture}\n          logout={logout}\n        />\n      )}\n      renderMenus={() => (\n        <>\n          <TopbarMenu\n            name={topbar.alertsLabel}\n            faIcon=\"bell\"\n            counter={0}\n          ></TopbarMenu>\n          <TopbarMenu\n            name={topbar.messagesLabel}\n            faIcon=\"envelope\"\n            counter={0}\n          ></TopbarMenu>\n        </>\n      )}\n    />\n  );\n}\n","import React from 'react';\n\nimport MonthSwitcher from '../common/MonthSwitcher';\nimport { Page } from '../sbadmin2';\nimport { CreateTransferButton } from './CreateTransferButton';\nimport { TransfersTablePanel } from './TransfersTablePanel';\n\nexport function TransfersPage() {\n  return (\n    <Page>\n      <Page.Header readTitle={d => d.sidebar.pages.transfers}>\n        <MonthSwitcher />\n      </Page.Header>\n      <TransfersTablePanel\n        readTitle={d => d.transfers.table.title}\n        createButton={<CreateTransferButton />}\n      />\n    </Page>\n  );\n}\n","export const sidebarConfig = ({ sidebar }) => [\n  {\n    entries: [\n      {\n        name: sidebar.pages.dashboard,\n        faIcon: 'receipt',\n        to: '/',\n      },\n    ],\n  },\n  {\n    name: sidebar.sections.currentMonth,\n    entries: [\n      {\n        name: sidebar.pages.expenses,\n        faIcon: 'receipt',\n        to: '/expenses',\n      },\n      {\n        name: sidebar.pages.transfers,\n        faIcon: 'exchange-alt',\n        to: '/transfers',\n      },\n      {\n        name: sidebar.pages.plans,\n        faIcon: 'map-marked-alt',\n        to: '/plans',\n      },\n    ],\n  },\n  {\n    name: sidebar.sections.budget,\n    entries: [\n      {\n        name: sidebar.pages.accounts,\n        faIcon: 'credit-card',\n        to: '/accounts',\n      },\n      {\n        name: sidebar.pages.envelopes,\n        faIcon: 'envelope-open-text',\n        to: '/envelopes',\n      },\n    ],\n  },\n];\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\nimport pl from '../../lang/pl';\nimport { useAuth0 } from '../../react-auth0-spa';\nimport AccountsPage from '../Accounts/AccountsPage';\nimport CategoryPage from '../Categories/CategoryPage';\nimport { MonthProvider } from '../context/Month';\nimport EnvelopesPage from '../Envelopes/EnvelopesPage';\nimport ExpensesPage from '../Expenses/ExpensesPage';\nimport { BudgetContext, BudgetProvider } from '../gql/budget';\nimport { MonthDashboardPage } from '../MonthDashboardPage/MonthDashboardPage';\nimport PlansPage from '../Plans/PlansPage';\nimport { SBAdmin2 } from '../sbadmin2';\nimport Topbar from '../Topbar';\nimport { TransfersPage } from '../Transfers/TransfersPage';\nimport { sidebarConfig } from './sidebarConfig';\n\nconst dictionaries = {\n  pl,\n};\n\nexport default function App() {\n  const { user, logout } = useAuth0();\n  return (\n    <BudgetProvider>\n      <SBAdmin2\n        sidebarProps={{\n          renderBrandName: () => 'Budget',\n          renderBrandIcon: () => <i className='fas fa-bold' />,\n          config: sidebarConfig(pl),\n        }}\n        topbar={Topbar}\n        copyright={'Budget 2019'}\n        dictionaries={dictionaries}\n        user={user}\n        logout={logout}\n      >\n        <BudgetContext.Consumer>\n          {({ selectedBudget }) =>\n            selectedBudget && (\n              <MonthProvider currentMonth={selectedBudget.currentMonth.month}>\n                <Switch>\n                  <Route path='/accounts' component={AccountsPage} />\n                  <Route path='/envelopes' component={EnvelopesPage} />\n                  <Route path='/expenses' component={ExpensesPage} />\n                  <Route path='/transfers' component={TransfersPage} />\n                  <Route path='/plans' component={PlansPage} />\n                  <Route path='/categories' component={CategoryPage} />\n                  <Route path='/' component={MonthDashboardPage} />\n                </Switch>\n              </MonthProvider>\n            )\n          }\n        </BudgetContext.Consumer>\n      </SBAdmin2>\n    </BudgetProvider>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\nimport './sb-admin-2.css';\nimport './index.css';\n\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport { AuthApolloProvider, createClient } from './apollo';\nimport config from './auth_config.json';\nimport App from './components/App/App';\nimport { Beta } from './components/Beta';\nimport { Auth0Context, Auth0Provider } from './react-auth0-spa';\nimport * as serviceWorker from './serviceWorker';\n\n// A function that routes the user to the right place\n// after login\nconst onRedirectCallback = appState => {\n  window.history.replaceState(\n    {},\n    document.title,\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname\n  );\n};\n\nconst redirectURI = `${window.location.origin}${process.env.PUBLIC_URL}`;\n\nconst ProdAuthorizationProvider = ({ children }) => (\n  <Auth0Provider\n    domain={config.domain}\n    client_id={config.clientId}\n    redirect_uri={redirectURI}\n    onRedirectCallback={onRedirectCallback}\n    audience={config.audience}\n    scope='beta'\n    returnTo={redirectURI}\n  >\n    <AuthApolloProvider>{children}</AuthApolloProvider>\n  </Auth0Provider>\n);\n\nProdAuthorizationProvider.propTypes = {\n  children: PropTypes.node,\n};\n\nconst DevAuthorizationProvider = ({ children }) => (\n  <Auth0Context.Provider\n    value={{\n      isAuthenticated: true,\n      loading: false,\n      loginWithRedirect: () => {},\n      user: {\n        name: 'Valerie Luna',\n        picture: 'https://source.unsplash.com/QAB-WJcbgJk/60x60',\n        locale: 'pl',\n      },\n      getTokenScopes: () => Promise.resolve(['beta']),\n      logout: () => {},\n    }}\n  >\n    <ApolloProvider client={createClient()}>{children}</ApolloProvider>\n  </Auth0Context.Provider>\n);\n\nDevAuthorizationProvider.propTypes = {\n  children: PropTypes.node,\n};\n\nconst authDisabled = process.env.REACT_APP_INSECURE_AUTH_DISABLED;\nconst AuthorizationProvider =\n  authDisabled !== 'true'\n    ? ProdAuthorizationProvider\n    : DevAuthorizationProvider;\n\nReactDOM.render(\n  <AuthorizationProvider>\n    <Beta>\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <App />\n      </BrowserRouter>\n    </Beta>\n  </AuthorizationProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\n\nimport { useAuth0 } from '../react-auth0-spa';\n\nexport function Beta({ children }) {\n  const { getTokenScopes } = useAuth0();\n  const [scope, setScope] = useState();\n\n  useEffect(() => {\n    getTokenScopes().then(setScope);\n  }, [setScope, getTokenScopes]);\n\n  if (!scope) {\n    return <div></div>;\n  }\n\n  const isBetaUser = scope.some(v => v === 'beta');\n\n  if (isBetaUser) {\n    return children;\n  }\n  return <div>This conent is available only to beta users</div>;\n}\n\nBeta.propTypes = {\n  children: PropTypes.node,\n};\n"],"sourceRoot":""}